"use strict";(globalThis.webpackChunkdefogv_2_wiki=globalThis.webpackChunkdefogv_2_wiki||[]).push([[6895],{1470:(e,r,n)=>{n.d(r,{A:()=>y});var s=n(6540),l=n(4164),t=n(7559),i=n(3104),c=n(6347),d=n(205),a=n(7485),o=n(1682),u=n(679);function h(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function x(e){const{values:r,children:n}=e;return(0,s.useMemo)(()=>{const e=r??function(e){return h(e).map(({props:{value:e,label:r,attributes:n,default:s}})=>({value:e,label:r,attributes:n,default:s}))}(n);return function(e){const r=(0,o.XI)(e,(e,r)=>e.value===r.value);if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[r,n])}function j({value:e,tabValues:r}){return r.some(r=>r.value===e)}function p({queryString:e=!1,groupId:r}){const n=(0,c.W6)(),l=function({queryString:e=!1,groupId:r}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:e,groupId:r});return[(0,a.aZ)(l),(0,s.useCallback)(e=>{if(!l)return;const r=new URLSearchParams(n.location.search);r.set(l,e),n.replace({...n.location,search:r.toString()})},[l,n])]}function g(e){const{defaultValue:r,queryString:n=!1,groupId:l}=e,t=x(e),[i,c]=(0,s.useState)(()=>function({defaultValue:e,tabValues:r}){if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!j({value:e,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${r.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=r.find(e=>e.default)??r[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:r,tabValues:t})),[a,o]=p({queryString:n,groupId:l}),[h,g]=function({groupId:e}){const r=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,l]=(0,u.Dv)(r);return[n,(0,s.useCallback)(e=>{r&&l.set(e)},[r,l])]}({groupId:l}),m=(()=>{const e=a??h;return j({value:e,tabValues:t})?e:null})();(0,d.A)(()=>{m&&c(m)},[m]);return{selectedValue:i,selectValue:(0,s.useCallback)(e=>{if(!j({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);c(e),o(e),g(e)},[o,g,t]),tabValues:t}}var m=n(2303);const k={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=n(4848);function b({className:e,block:r,selectedValue:n,selectValue:s,tabValues:t}){const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.a_)(),a=e=>{const r=e.currentTarget,l=c.indexOf(r),i=t[l].value;i!==n&&(d(r),s(i))},o=e=>{let r=null;switch(e.key){case"Enter":a(e);break;case"ArrowRight":{const n=c.indexOf(e.currentTarget)+1;r=c[n]??c[0];break}case"ArrowLeft":{const n=c.indexOf(e.currentTarget)-1;r=c[n]??c[c.length-1];break}}r?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":r},e),children:t.map(({value:e,label:r,attributes:s})=>(0,v.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{c.push(e)},onKeyDown:o,onClick:a,...s,className:(0,l.A)("tabs__item",k.tabItem,s?.className,{"tabs__item--active":n===e}),children:r??e},e))})}function f({lazy:e,children:r,selectedValue:n}){const t=(Array.isArray(r)?r:[r]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===n);return e?(0,s.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:t.map((e,r)=>(0,s.cloneElement)(e,{key:r,hidden:e.props.value!==n}))})}function w(e){const r=g(e);return(0,v.jsxs)("div",{className:(0,l.A)(t.G.tabs.container,"tabs-container",k.tabList),children:[(0,v.jsx)(b,{...r,...e}),(0,v.jsx)(f,{...r,...e})]})}function y(e){const r=(0,m.A)();return(0,v.jsx)(w,{...e,children:h(e.children)},String(r))}},1634:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>a,default:()=>x,frontMatter:()=>d,metadata:()=>s,toc:()=>u});const s=JSON.parse('{"id":"k3s-k3d","title":"K3s & K3d","description":"Understanding lightweight Kubernetes and containerized cluster management","source":"@site/docs/k3s-k3d.mdx","sourceDirName":".","slug":"/k3s-k3d","permalink":"/defogv2-wiki/docs/k3s-k3d","draft":false,"unlisted":false,"editUrl":"https://github.com/aprountzos/defogv2-wiki/tree/main/docs/docs/k3s-k3d.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"K3s & K3d","description":"Understanding lightweight Kubernetes and containerized cluster management","sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial Intro","permalink":"/defogv2-wiki/docs/intro"},"next":{"title":"Service Auto-Exporter Controller","permalink":"/defogv2-wiki/docs/service-auto-exporter"}}');var l=n(4848),t=n(8453),i=n(1470),c=n(9365);const d={title:"K3s & K3d",description:"Understanding lightweight Kubernetes and containerized cluster management",sidebar_position:1},a="K3s & K3d",o={},u=[{value:"What is Kubernetes?",id:"what-is-kubernetes",level:2},{value:"The Problem with Standard Kubernetes",id:"the-problem-with-standard-kubernetes",level:2},{value:"What is K3s?",id:"what-is-k3s",level:2},{value:"Why K3s is Perfect for Our Use Case",id:"why-k3s-is-perfect-for-our-use-case",level:3},{value:"What Makes K3s Lightweight?",id:"what-makes-k3s-lightweight",level:3},{value:"K3s Architecture",id:"k3s-architecture",level:3},{value:"What is K3d?",id:"what-is-k3d",level:2},{value:"Why K3d?",id:"why-k3d",level:3},{value:"K3d vs K3s",id:"k3d-vs-k3s",level:3},{value:"How K3d Works",id:"how-k3d-works",level:2},{value:"Basic Workflow",id:"basic-workflow",level:3},{value:"What Happens Behind the Scenes",id:"what-happens-behind-the-scenes",level:3},{value:"K3d Components",id:"k3d-components",level:3},{value:"K3d Features for Multi-Cluster",id:"k3d-features-for-multi-cluster",level:2},{value:"1. Multiple Isolated Clusters",id:"1-multiple-isolated-clusters",level:3},{value:"2. Custom Networking",id:"2-custom-networking",level:3},{value:"3. Resource Simulation",id:"3-resource-simulation",level:3},{value:"4. Port Mapping",id:"4-port-mapping",level:3},{value:"5. Volume Mounts",id:"5-volume-mounts",level:3},{value:"Creating Your First K3d Cluster",id:"creating-your-first-k3d-cluster",level:2},{value:"Installation",id:"installation",level:3},{value:"Basic Commands",id:"basic-commands",level:3},{value:"Testing Your Cluster",id:"testing-your-cluster",level:3},{value:"Viewing Logs",id:"viewing-logs",level:3},{value:"Multi-Cluster Architecture with K3d",id:"multi-cluster-architecture-with-k3d",level:2},{value:"Why This Works",id:"why-this-works",level:3},{value:"K3s vs K3d vs Kubernetes",id:"k3s-vs-k3d-vs-kubernetes",level:2},{value:"Common K3d Configurations",id:"common-k3d-configurations",level:2},{value:"Development Setup (Single Cluster)",id:"development-setup-single-cluster",level:3},{value:"Testing Setup (Multiple Clusters)",id:"testing-setup-multiple-clusters",level:3},{value:"CI/CD Setup",id:"cicd-setup",level:3},{value:"Advanced K3d Features",id:"advanced-k3d-features",level:2},{value:"Registry Integration",id:"registry-integration",level:3},{value:"Image Import",id:"image-import",level:3},{value:"Kubeconfig Management",id:"kubeconfig-management",level:3},{value:"Cluster Snapshots",id:"cluster-snapshots",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Cluster Won&#39;t Start",id:"cluster-wont-start",level:3},{value:"Can&#39;t Access Services",id:"cant-access-services",level:3},{value:"Networking Issues",id:"networking-issues",level:3},{value:"Out of Resources",id:"out-of-resources",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Descriptive Cluster Names",id:"1-use-descriptive-cluster-names",level:3},{value:"2. Create Shared Networks for Related Clusters",id:"2-create-shared-networks-for-related-clusters",level:3},{value:"3. Use Config Files for Complex Setups",id:"3-use-config-files-for-complex-setups",level:3},{value:"4. Clean Up Regularly",id:"4-clean-up-regularly",level:3},{value:"5. Document Your Clusters",id:"5-document-your-clusters",level:3},{value:"Performance Considerations",id:"performance-considerations",level:2},{value:"Resource Usage",id:"resource-usage",level:3},{value:"Optimization Tips",id:"optimization-tips",level:3},{value:"When to Use K3s vs K3d",id:"when-to-use-k3s-vs-k3d",level:2},{value:"Use K3s directly when:",id:"use-k3s-directly-when",level:3},{value:"Use K3d when:",id:"use-k3d-when",level:3},{value:"What&#39;s Next?",id:"whats-next",level:2}];function h(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.header,{children:(0,l.jsx)(r.h1,{id:"k3s--k3d",children:"K3s & K3d"})}),"\n",(0,l.jsx)(r.h2,{id:"what-is-kubernetes",children:"What is Kubernetes?"}),"\n",(0,l.jsx)(r.p,{children:"Before diving into K3s and K3d, let's quickly review what Kubernetes is."}),"\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"Kubernetes"})," (K8s) is a container orchestration platform that automates deployment, scaling, and management of containerized applications. Think of it as an operating system for your cluster."]}),"\n",(0,l.jsx)(r.mermaid,{value:"graph TB\r\n    User[Developer]\r\n    K8s[Kubernetes]\r\n    \r\n    subgraph Cluster[Kubernetes Cluster]\r\n        Node1[Node 1]\r\n        Node2[Node 2]\r\n        Node3[Node 3]\r\n    end\r\n    \r\n    User --\x3e|Deploy App| K8s\r\n    K8s --\x3e|Schedules Pods| Node1\r\n    K8s --\x3e|Schedules Pods| Node2\r\n    K8s --\x3e|Schedules Pods| Node3"}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"What Kubernetes does:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Runs your containers across multiple machines"}),"\n",(0,l.jsx)(r.li,{children:"Automatically restarts failed containers"}),"\n",(0,l.jsx)(r.li,{children:"Scales applications up and down"}),"\n",(0,l.jsx)(r.li,{children:"Manages networking between containers"}),"\n",(0,l.jsx)(r.li,{children:"Handles load balancing"}),"\n",(0,l.jsx)(r.li,{children:"Stores configuration and secrets"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"the-problem-with-standard-kubernetes",children:"The Problem with Standard Kubernetes"}),"\n",(0,l.jsx)(r.p,{children:"Full Kubernetes is powerful but has challenges:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Heavy"}),": Requires significant resources (4GB+ RAM minimum)"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Complex"}),": Many components and dependencies"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Slow"}),": Takes minutes to start up"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Overkill"}),": Too much for development, testing, or edge devices"]}),"\n"]}),"\n",(0,l.jsx)(r.p,{children:"For cloud-fog-edge architectures, we need something lighter, especially for fog and edge layers."}),"\n",(0,l.jsx)(r.h2,{id:"what-is-k3s",children:"What is K3s?"}),"\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"K3s"})," is a lightweight Kubernetes distribution built by Rancher Labs (now part of SUSE). It's certified Kubernetes, meaning it passes all conformance tests and works exactly like standard Kubernetes."]}),"\n",(0,l.jsx)(r.admonition,{title:"The Name",type:"info",children:(0,l.jsx)(r.p,{children:'"K3s" is a play on "K8s" (Kubernetes). The "5 less than 8" implies it\'s lighter/smaller.'})}),"\n",(0,l.jsx)(r.h3,{id:"why-k3s-is-perfect-for-our-use-case",children:"Why K3s is Perfect for Our Use Case"}),"\n",(0,l.jsx)(r.mermaid,{value:"graph LR\r\n    subgraph Standard[Standard K8s]\r\n        Heavy[Heavy - 4GB+ RAM<br/>Complex Setup<br/>Many Dependencies]\r\n    end\r\n    \r\n    subgraph K3s_[K3s]\r\n        Light[Lightweight - 512MB RAM<br/>Single Binary<br/>Fast Startup]\r\n    end\r\n    \r\n    Standard --\x3e|Simplified| K3s_"}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Key Features:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Single Binary"}),": Everything packaged in one ~60MB file"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Low Resource Usage"}),": Runs in 512MB RAM"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Fast Startup"}),": Cluster ready in seconds"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"ARM Support"}),": Perfect for Raspberry Pi and edge devices"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Batteries Included"}),": Comes with essential components built-in"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Production Ready"}),": Used by major companies in production"]}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"what-makes-k3s-lightweight",children:"What Makes K3s Lightweight?"}),"\n",(0,l.jsx)(r.p,{children:"K3s achieves its small size by:"}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Removing Cloud Provider Code"}),": No AWS, Azure, GCP specific code"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Replacing etcd"}),": Uses SQLite by default (or can use PostgreSQL/MySQL)"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Combining Binaries"}),": All components in one executable"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Removing Legacy Features"}),": Only modern, necessary features included"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Optimized Storage"}),": Built-in local storage provider"]}),"\n"]}),"\n",(0,l.jsx)(r.mermaid,{value:"graph BT\r\n    subgraph K8s[Standard Kubernetes]\r\n        API1[API Server]\r\n        ETCD[etcd]\r\n        Sched1[Scheduler]\r\n        Ctrl1[Controller]\r\n        Kubelet1[Kubelet]\r\n        CP1[Cloud Providers]\r\n        Storage1[Storage Drivers]\r\n    end\r\n    \r\n    subgraph K3s_[K3s - Simplified]\r\n        Single[Single Binary]\r\n        SQLite[SQLite/etcd]\r\n        Local[Local Storage]\r\n    end\r\n    \r\n    K8s --\x3e|Consolidate| K3s_"}),"\n",(0,l.jsx)(r.h3,{id:"k3s-architecture",children:"K3s Architecture"}),"\n",(0,l.jsx)(r.p,{children:"K3s has two types of nodes:"}),"\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"Server Node"})," (Control Plane):"]}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Runs the Kubernetes API server"}),"\n",(0,l.jsx)(r.li,{children:"Manages cluster state"}),"\n",(0,l.jsx)(r.li,{children:"Schedules workloads"}),"\n",(0,l.jsx)(r.li,{children:"Can also run workloads"}),"\n"]}),"\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"Agent Node"})," (Worker):"]}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Runs workloads only"}),"\n",(0,l.jsx)(r.li,{children:"Reports back to server"}),"\n",(0,l.jsx)(r.li,{children:"Lighter than server node"}),"\n"]}),"\n",(0,l.jsx)(r.mermaid,{value:"graph TB\r\n    subgraph Server[Server Node]\r\n        API[API Server]\r\n        SQLite[SQLite]\r\n        Scheduler[Scheduler]\r\n        Controller[Controller Manager]\r\n        Kubelet_S[Kubelet]\r\n    end\r\n    \r\n    subgraph Agent1[Agent Node 1]\r\n        Kubelet_A1[Kubelet]\r\n        Containerd_A1[Containerd]\r\n        Pods_A1[Pods]\r\n    end\r\n    \r\n    subgraph Agent2[Agent Node 2]\r\n        Kubelet_A2[Kubelet]\r\n        Containerd_A2[Containerd]\r\n        Pods_A2[Pods]\r\n    end\r\n    \r\n    API --\x3e Kubelet_A1\r\n    API --\x3e Kubelet_A2\r\n    Scheduler --\x3e API\r\n    Controller --\x3e API"}),"\n",(0,l.jsxs)(r.p,{children:["For our use case, we'll use ",(0,l.jsx)(r.strong,{children:"single-node clusters"})," (server only) to simulate different infrastructure tiers."]}),"\n",(0,l.jsx)(r.h2,{id:"what-is-k3d",children:"What is K3d?"}),"\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"K3d"})," is a tool that runs K3s clusters in Docker containers. It makes creating and managing multiple Kubernetes clusters trivially easy."]}),"\n",(0,l.jsx)(r.mermaid,{value:"graph BT\r\n    subgraph Docker[Docker]\r\n        subgraph Container1[Container - Cluster 1]\r\n            K3s1[K3s Server]\r\n        end\r\n        \r\n        subgraph Container2[Container - Cluster 2]\r\n            K3s2[K3s Server]\r\n        end\r\n        \r\n        subgraph Container3[Container - Cluster 3]\r\n            K3s3[K3s Server]\r\n        end\r\n    end\r\n    \r\n    User[Developer] --\x3e|k3d commands| Docker"}),"\n",(0,l.jsx)(r.h3,{id:"why-k3d",children:"Why K3d?"}),"\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"Without K3d"}),", setting up multiple clusters requires:"]}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Multiple VMs or physical machines"}),"\n",(0,l.jsx)(r.li,{children:"Complex networking configuration"}),"\n",(0,l.jsx)(r.li,{children:"Significant resources"}),"\n",(0,l.jsx)(r.li,{children:"Time-consuming setup"}),"\n"]}),"\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"With K3d"}),", you get:"]}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Multiple clusters on one laptop"}),"\n",(0,l.jsx)(r.li,{children:"Setup in seconds"}),"\n",(0,l.jsx)(r.li,{children:"Easy cleanup"}),"\n",(0,l.jsx)(r.li,{children:"Perfect for development and testing"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"k3d-vs-k3s",children:"K3d vs K3s"}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Aspect"}),(0,l.jsx)(r.th,{children:"K3s"}),(0,l.jsx)(r.th,{children:"K3d"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"What it is"})}),(0,l.jsx)(r.td,{children:"Lightweight Kubernetes distribution"}),(0,l.jsx)(r.td,{children:"Tool to run K3s in Docker"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Runs on"})}),(0,l.jsx)(r.td,{children:"Virtual machines, bare metal, containers"}),(0,l.jsx)(r.td,{children:"Docker containers only"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Use case"})}),(0,l.jsx)(r.td,{children:"Production and development"}),(0,l.jsx)(r.td,{children:"Development and testing"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Setup"})}),(0,l.jsx)(r.td,{children:"Manual installation"}),(0,l.jsx)(r.td,{children:"Automated via Docker"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Multi-cluster"})}),(0,l.jsx)(r.td,{children:"Requires multiple machines/VMs"}),(0,l.jsx)(r.td,{children:"Multiple clusters on one machine"})]})]})]}),"\n",(0,l.jsx)(r.p,{children:"Think of it this way:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"K3s"})," = The Kubernetes distribution"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"K3d"})," = The wrapper that runs K3s in Docker"]}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"how-k3d-works",children:"How K3d Works"}),"\n",(0,l.jsx)(r.h3,{id:"basic-workflow",children:"Basic Workflow"}),"\n",(0,l.jsx)(r.mermaid,{value:"sequenceDiagram\r\n    participant User\r\n    participant K3d\r\n    participant Docker\r\n    participant K3s\r\n    \r\n    User->>K3d: k3d cluster create my-cluster\r\n    K3d->>Docker: Create container\r\n    Docker->>K3s: Start K3s server\r\n    K3s->>K3s: Initialize cluster\r\n    K3s->>K3d: Cluster ready\r\n    K3d->>User: Kubeconfig updated\r\n    \r\n    Note over User: kubectl commands now work"}),"\n",(0,l.jsx)(r.h3,{id:"what-happens-behind-the-scenes",children:"What Happens Behind the Scenes"}),"\n",(0,l.jsxs)(r.p,{children:["When you run ",(0,l.jsx)(r.code,{children:"k3d cluster create my-cluster"}),":"]}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Docker Container Created"}),": K3d creates a Docker container"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"K3s Installed"}),": K3s is started inside the container"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Networking Setup"}),": Docker network created for cluster communication"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Kubeconfig Generated"}),": K3d adds cluster config to ",(0,l.jsx)(r.code,{children:"~/.kube/config"})]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"LoadBalancer Created"}),": Optional serverlb container for LoadBalancer services"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Ready"}),": You can now use ",(0,l.jsx)(r.code,{children:"kubectl"})," commands"]}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"k3d-components",children:"K3d Components"}),"\n",(0,l.jsx)(r.mermaid,{value:"graph TB\r\n    subgraph DockerNetwork[Docker Network: my-cluster]\r\n        subgraph ServerLB[k3d-my-cluster-serverlb]\r\n            LB[Load Balancer<br/>Port Forwarding]\r\n        end\r\n        \r\n        subgraph Server[k3d-my-cluster-server-0]\r\n            K3s[K3s Server<br/>API: 6443<br/>Kubelets<br/>Containerd]\r\n        end\r\n        \r\n        subgraph Agent[k3d-my-cluster-agent-0]\r\n            K3s_Agent[K3s Agent<br/>Kubelet<br/>Containerd]\r\n        end\r\n    end\r\n    \r\n    Host[Host Machine<br/>localhost:6443] --\x3e LB\r\n    LB --\x3e Server\r\n    Server <--\x3e Agent"}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Components:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Server Container"}),": Runs K3s control plane and workloads"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Agent Container"}),": (Optional) Runs workloads only"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Serverlb Container"}),": LoadBalancer proxy for accessing services"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Docker Network"}),": Connects all containers"]}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"k3d-features-for-multi-cluster",children:"K3d Features for Multi-Cluster"}),"\n",(0,l.jsx)(r.h3,{id:"1-multiple-isolated-clusters",children:"1. Multiple Isolated Clusters"}),"\n",(0,l.jsx)(r.p,{children:"Create as many clusters as you need:"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"k3d cluster create cloud\r\nk3d cluster create fog  \r\nk3d cluster create edge\n"})}),"\n",(0,l.jsx)(r.p,{children:"Each cluster is completely isolated:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Separate API servers"}),"\n",(0,l.jsx)(r.li,{children:"Separate networks"}),"\n",(0,l.jsx)(r.li,{children:"Separate resources"}),"\n",(0,l.jsx)(r.li,{children:"Separate namespaces"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"2-custom-networking",children:"2. Custom Networking"}),"\n",(0,l.jsx)(r.p,{children:"Connect clusters on the same Docker network:"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Create shared network\r\ndocker network create multicluster\r\n\r\n# Create clusters on shared network\r\nk3d cluster create top --network multicluster\r\nk3d cluster create mid --network multicluster\r\nk3d cluster create bot --network multicluster\n"})}),"\n",(0,l.jsx)(r.p,{children:"This allows:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Clusters can discover each other by container name"}),"\n",(0,l.jsx)(r.li,{children:"Direct communication between clusters"}),"\n",(0,l.jsx)(r.li,{children:"Simulates real network topology"}),"\n"]}),"\n",(0,l.jsx)(r.mermaid,{value:"graph TB\r\n    subgraph Network[Docker Network: multicluster]\r\n        Top[k3d-top-server-0<br/>IP: 172.18.0.2]\r\n        Mid[k3d-mid-server-0<br/>IP: 172.18.0.3]\r\n        Bot[k3d-bot-server-0<br/>IP: 172.18.0.4]\r\n    end\r\n    \r\n    Top <--\x3e Mid\r\n    Mid <--\x3e Bot"}),"\n",(0,l.jsx)(r.h3,{id:"3-resource-simulation",children:"3. Resource Simulation"}),"\n",(0,l.jsx)(r.p,{children:"Simulate different resource tiers:"}),"\n",(0,l.jsxs)(i.A,{children:[(0,l.jsxs)(c.A,{value:"cloud",label:"Cloud Tier",default:!0,children:[(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"k3d cluster create cloud \\\r\n  --servers 1 \\\r\n  --agents 2\n"})}),(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Simulates:"})}),(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Large cluster"}),"\n",(0,l.jsx)(r.li,{children:"Multiple nodes"}),"\n",(0,l.jsx)(r.li,{children:"High resource availability"}),"\n"]})]}),(0,l.jsxs)(c.A,{value:"fog",label:"Fog Tier",children:[(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"k3d cluster create fog \\\r\n  --servers 1 \\\r\n  --agents 1\n"})}),(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Simulates:"})}),(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Medium cluster"}),"\n",(0,l.jsx)(r.li,{children:"Limited nodes"}),"\n",(0,l.jsx)(r.li,{children:"Moderate resources"}),"\n"]})]}),(0,l.jsxs)(c.A,{value:"edge",label:"Edge Tier",children:[(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"k3d cluster create edge \\\r\n  --servers 1 \\\r\n  --agents 0\n"})}),(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Simulates:"})}),(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Small cluster"}),"\n",(0,l.jsx)(r.li,{children:"Single node"}),"\n",(0,l.jsx)(r.li,{children:"Constrained resources"}),"\n"]})]})]}),"\n",(0,l.jsx)(r.h3,{id:"4-port-mapping",children:"4. Port Mapping"}),"\n",(0,l.jsx)(r.p,{children:"Expose services to your host machine:"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:'k3d cluster create my-cluster \\\r\n  --api-port 6443 \\\r\n  -p "8080:80@loadbalancer" \\\r\n  -p "8443:443@loadbalancer"\n'})}),"\n",(0,l.jsx)(r.p,{children:"Now services using ports 80/443 in the cluster are accessible on localhost:8080/8443."}),"\n",(0,l.jsx)(r.h3,{id:"5-volume-mounts",children:"5. Volume Mounts"}),"\n",(0,l.jsx)(r.p,{children:"Share files between host and cluster:"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"k3d cluster create my-cluster \\\r\n  --volume /path/on/host:/path/in/cluster@server:0\n"})}),"\n",(0,l.jsx)(r.p,{children:"Useful for:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Configuration files"}),"\n",(0,l.jsx)(r.li,{children:"Persistent data"}),"\n",(0,l.jsx)(r.li,{children:"Development code"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"creating-your-first-k3d-cluster",children:"Creating Your First K3d Cluster"}),"\n",(0,l.jsx)(r.h3,{id:"installation",children:"Installation"}),"\n",(0,l.jsxs)(i.A,{children:[(0,l.jsx)(c.A,{value:"linux",label:"Linux",default:!0,children:(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"curl -s https://raw.githubusercontent.com/k3d-io/k3d/main/install.sh | bash\n"})})}),(0,l.jsx)(c.A,{value:"mac",label:"macOS",children:(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"brew install k3d\n"})})}),(0,l.jsx)(c.A,{value:"windows",label:"Windows",children:(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-powershell",children:"# Using Chocolatey\r\nchoco install k3d\r\n\r\n# Or download from GitHub releases\n"})})})]}),"\n",(0,l.jsx)(r.h3,{id:"basic-commands",children:"Basic Commands"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Create a cluster\r\nk3d cluster create my-cluster\r\n\r\n# List clusters\r\nk3d cluster list\r\n\r\n# Get kubeconfig\r\nk3d kubeconfig get my-cluster\r\n\r\n# Delete cluster\r\nk3d cluster delete my-cluster\r\n\r\n# Start stopped cluster\r\nk3d cluster start my-cluster\r\n\r\n# Stop cluster (preserves state)\r\nk3d cluster stop my-cluster\n"})}),"\n",(0,l.jsx)(r.h3,{id:"testing-your-cluster",children:"Testing Your Cluster"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Create cluster\r\nk3d cluster create test\r\n\r\n# Check nodes\r\nkubectl get nodes\r\n\r\n# Deploy test application\r\nkubectl create deployment nginx --image=nginx\r\n\r\n# Expose service\r\nkubectl expose deployment nginx --port=80 --type=LoadBalancer\r\n\r\n# Check service\r\nkubectl get services\r\n\r\n# Access nginx\r\ncurl localhost:8081  # or whatever port is mapped\n"})}),"\n",(0,l.jsx)(r.h3,{id:"viewing-logs",children:"Viewing Logs"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# K3s server logs\r\ndocker logs k3d-my-cluster-server-0\r\n\r\n# Follow logs\r\ndocker logs -f k3d-my-cluster-server-0\r\n\r\n# Check specific container\r\ndocker exec -it k3d-my-cluster-server-0 sh\n"})}),"\n",(0,l.jsx)(r.h2,{id:"multi-cluster-architecture-with-k3d",children:"Multi-Cluster Architecture with K3d"}),"\n",(0,l.jsx)(r.p,{children:"Here's how we'll use K3d for cloud-fog-edge simulation:"}),"\n",(0,l.jsx)(r.mermaid,{value:"graph TB\r\n    subgraph Host[Your Laptop / Desktop]\r\n        subgraph Network[Docker Network: multicluster-example]\r\n            subgraph Top[k3d-top]\r\n                TopServer[Server Node<br/>8 vCPU / 32GB simulation]\r\n            end\r\n            \r\n            subgraph Mid[k3d-mid]\r\n                MidServer[Server Node<br/>4 vCPU / 16GB simulation]\r\n            end\r\n            \r\n            subgraph Bot[k3d-bot]\r\n                BotServer[Server Node<br/>2 vCPU / 4GB simulation]\r\n            end\r\n        end\r\n    end\r\n    \r\n    Bot <--\x3e|Linkerd Gateway| Mid\r\n    Mid <--\x3e|Linkerd Gateway| Top"}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Cluster Configuration:"})}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Cluster"}),(0,l.jsx)(r.th,{children:"Role"}),(0,l.jsx)(r.th,{children:"Resources (Simulated)"}),(0,l.jsx)(r.th,{children:"K3d Command"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"top"})}),(0,l.jsx)(r.td,{children:"Cloud"}),(0,l.jsx)(r.td,{children:"8 vCPU, 32GB RAM"}),(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"--servers 1"})})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"mid"})}),(0,l.jsx)(r.td,{children:"Fog"}),(0,l.jsx)(r.td,{children:"4 vCPU, 16GB RAM"}),(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"--servers 1"})})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"bot"})}),(0,l.jsx)(r.td,{children:"Edge"}),(0,l.jsx)(r.td,{children:"2 vCPU, 4GB RAM"}),(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"--servers 1"})})]})]})]}),"\n",(0,l.jsx)(r.h3,{id:"why-this-works",children:"Why This Works"}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Isolated but Connected"}),": Each cluster is independent but can communicate via Docker network"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Realistic Simulation"}),": Mimics real distributed architecture"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Fast Development"}),": Create/destroy in seconds"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Cost Effective"}),": No need for multiple VMs or cloud resources"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Reproducible"}),": Same setup works on any machine with Docker"]}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"k3s-vs-k3d-vs-kubernetes",children:"K3s vs K3d vs Kubernetes"}),"\n",(0,l.jsx)(r.p,{children:"Let's clarify the differences:"}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Aspect"}),(0,l.jsx)(r.th,{children:"Kubernetes (K8s)"}),(0,l.jsx)(r.th,{children:"K3s"}),(0,l.jsx)(r.th,{children:"K3d"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Type"})}),(0,l.jsx)(r.td,{children:"Container orchestration platform"}),(0,l.jsx)(r.td,{children:"Lightweight K8s distribution"}),(0,l.jsx)(r.td,{children:"K3s in Docker wrapper"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Size"})}),(0,l.jsx)(r.td,{children:"~1GB+"}),(0,l.jsx)(r.td,{children:"~60MB binary"}),(0,l.jsx)(r.td,{children:"Adds ~100MB for Docker images"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Memory"})}),(0,l.jsx)(r.td,{children:"4GB+ minimum"}),(0,l.jsx)(r.td,{children:"512MB minimum"}),(0,l.jsx)(r.td,{children:"512MB per cluster"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Setup Time"})}),(0,l.jsx)(r.td,{children:"15-30 minutes"}),(0,l.jsx)(r.td,{children:"2-5 minutes"}),(0,l.jsx)(r.td,{children:"10-30 seconds"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Installation"})}),(0,l.jsx)(r.td,{children:"Complex, many steps"}),(0,l.jsx)(r.td,{children:"Single binary"}),(0,l.jsx)(r.td,{children:"Single command"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Production"})}),(0,l.jsx)(r.td,{children:"\u2705 Industry standard"}),(0,l.jsx)(r.td,{children:"\u2705 Production ready"}),(0,l.jsx)(r.td,{children:"\u26a0\ufe0f Development/Testing only"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Multi-cluster"})}),(0,l.jsx)(r.td,{children:"Requires multiple machines"}),(0,l.jsx)(r.td,{children:"Requires multiple machines/VMs"}),(0,l.jsx)(r.td,{children:"Multiple clusters on one machine"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Use Cases"})}),(0,l.jsx)(r.td,{children:"Large scale production"}),(0,l.jsx)(r.td,{children:"IoT, Edge, Small scale, Development"}),(0,l.jsx)(r.td,{children:"Local development, Testing, CI/CD"})]})]})]}),"\n",(0,l.jsx)(r.h2,{id:"common-k3d-configurations",children:"Common K3d Configurations"}),"\n",(0,l.jsx)(r.h3,{id:"development-setup-single-cluster",children:"Development Setup (Single Cluster)"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:'k3d cluster create dev \\\r\n  --servers 1 \\\r\n  --agents 2 \\\r\n  --api-port 6443 \\\r\n  -p "8080:80@loadbalancer" \\\r\n  -p "8443:443@loadbalancer" \\\r\n  --volume "${HOME}/projects:/projects@server:0"\n'})}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"What this does:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:'Creates cluster named "dev"'}),"\n",(0,l.jsx)(r.li,{children:"1 server + 2 agent nodes"}),"\n",(0,l.jsx)(r.li,{children:"API accessible on port 6443"}),"\n",(0,l.jsx)(r.li,{children:"HTTP on localhost:8080, HTTPS on localhost:8443"}),"\n",(0,l.jsx)(r.li,{children:"Mounts your projects folder"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"testing-setup-multiple-clusters",children:"Testing Setup (Multiple Clusters)"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Create network\r\ndocker network create test-network\r\n\r\n# Create clusters\r\nfor cluster in app-v1 app-v2 app-v3; do\r\n  k3d cluster create $cluster \\\r\n    --servers 1 \\\r\n    --agents 0 \\\r\n    --network test-network \\\r\n    --api-port 0  # Random port\r\ndone\n"})}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"What this does:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Creates shared Docker network"}),"\n",(0,l.jsx)(r.li,{children:"Creates 3 independent clusters"}),"\n",(0,l.jsx)(r.li,{children:"All on same network (can communicate)"}),"\n",(0,l.jsx)(r.li,{children:"Random API ports (avoid conflicts)"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"cicd-setup",children:"CI/CD Setup"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"k3d cluster create ci \\\r\n  --servers 1 \\\r\n  --agents 0 \\\r\n  --wait \\\r\n  --timeout 60s\r\n  \r\n# Run tests\r\nkubectl apply -f tests/\r\nkubectl wait --for=condition=complete job/test-job\r\n\r\n# Cleanup\r\nk3d cluster delete ci\n"})}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"What this does:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Quick cluster for CI pipeline"}),"\n",(0,l.jsx)(r.li,{children:"Waits for cluster to be ready"}),"\n",(0,l.jsx)(r.li,{children:"Runs tests"}),"\n",(0,l.jsx)(r.li,{children:"Cleans up after tests"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"advanced-k3d-features",children:"Advanced K3d Features"}),"\n",(0,l.jsx)(r.h3,{id:"registry-integration",children:"Registry Integration"}),"\n",(0,l.jsx)(r.p,{children:"Run a local Docker registry with K3d:"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Create registry\r\nk3d registry create my-registry --port 5000\r\n\r\n# Create cluster using that registry\r\nk3d cluster create my-cluster --registry-use k3d-my-registry:5000\n"})}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Benefits:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Fast image pulls (local)"}),"\n",(0,l.jsx)(r.li,{children:"No Docker Hub rate limits"}),"\n",(0,l.jsx)(r.li,{children:"Test custom images"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"image-import",children:"Image Import"}),"\n",(0,l.jsx)(r.p,{children:"Import images directly into cluster:"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Build image\r\ndocker build -t my-app:latest .\r\n\r\n# Import into cluster\r\nk3d image import my-app:latest -c my-cluster\r\n\r\n# Now deploy\r\nkubectl create deployment my-app --image=my-app:latest\n"})}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"When to use:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Testing local images"}),"\n",(0,l.jsx)(r.li,{children:"No registry needed"}),"\n",(0,l.jsx)(r.li,{children:"Faster than pushing/pulling"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"kubeconfig-management",children:"Kubeconfig Management"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Get kubeconfig for specific cluster\r\nk3d kubeconfig get my-cluster > my-cluster-config.yaml\r\n\r\n# Merge into default kubeconfig\r\nk3d kubeconfig merge my-cluster --kubeconfig-merge-default\r\n\r\n# Switch contexts\r\nkubectl config use-context k3d-my-cluster\r\n\r\n# View all contexts\r\nkubectl config get-contexts\n"})}),"\n",(0,l.jsx)(r.h3,{id:"cluster-snapshots",children:"Cluster Snapshots"}),"\n",(0,l.jsx)(r.p,{children:"Save and restore cluster state:"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Stop cluster (preserves state)\r\nk3d cluster stop my-cluster\r\n\r\n# Start again (restores state)\r\nk3d cluster start my-cluster\r\n\r\n# Delete and recreate (loses state)\r\nk3d cluster delete my-cluster\r\nk3d cluster create my-cluster\n"})}),"\n",(0,l.jsx)(r.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(r.h3,{id:"cluster-wont-start",children:"Cluster Won't Start"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Check Docker is running\r\ndocker ps\r\n\r\n# Check for port conflicts\r\nlsof -i :6443\r\n\r\n# View K3d logs\r\nk3d cluster list\r\ndocker logs k3d-my-cluster-server-0\r\n\r\n# Delete and recreate\r\nk3d cluster delete my-cluster\r\nk3d cluster create my-cluster\n"})}),"\n",(0,l.jsx)(r.h3,{id:"cant-access-services",children:"Can't Access Services"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Check LoadBalancer IP\r\nkubectl get services\r\n\r\n# Check port mappings\r\ndocker ps | grep k3d\r\n\r\n# Test from inside cluster\r\nkubectl run test --image=busybox -it --rm -- wget -O- http://my-service\n"})}),"\n",(0,l.jsx)(r.h3,{id:"networking-issues",children:"Networking Issues"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Check Docker network\r\ndocker network inspect k3d-my-cluster\r\n\r\n# Check container connectivity\r\ndocker exec k3d-cluster1-server-0 ping k3d-cluster2-server-0\r\n\r\n# Recreate network\r\ndocker network rm multicluster\r\ndocker network create multicluster\n"})}),"\n",(0,l.jsx)(r.h3,{id:"out-of-resources",children:"Out of Resources"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Check Docker resource usage\r\ndocker stats\r\n\r\n# Remove unused containers\r\ndocker container prune\r\n\r\n# Remove unused images\r\ndocker image prune -a\r\n\r\n# Increase Docker Desktop resources\r\n# Docker Desktop \u2192 Settings \u2192 Resources\n"})}),"\n",(0,l.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(r.h3,{id:"1-use-descriptive-cluster-names",children:"1. Use Descriptive Cluster Names"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Good\r\nk3d cluster create prod-api\r\nk3d cluster create staging-web\r\nk3d cluster create test-db\r\n\r\n# Bad\r\nk3d cluster create cluster1\r\nk3d cluster create test\r\nk3d cluster create abc\n"})}),"\n",(0,l.jsx)(r.h3,{id:"2-create-shared-networks-for-related-clusters",children:"2. Create Shared Networks for Related Clusters"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"docker network create project-x\r\n\r\nk3d cluster create frontend --network project-x\r\nk3d cluster create backend --network project-x\r\nk3d cluster create database --network project-x\n"})}),"\n",(0,l.jsx)(r.h3,{id:"3-use-config-files-for-complex-setups",children:"3. Use Config Files for Complex Setups"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-yaml",children:"# k3d-config.yaml\r\napiVersion: k3d.io/v1alpha5\r\nkind: Simple\r\nmetadata:\r\n  name: my-cluster\r\nservers: 1\r\nagents: 2\r\nports:\r\n  - port: 8080:80\r\n    nodeFilters:\r\n      - loadbalancer\r\noptions:\r\n  k3s:\r\n    extraArgs:\r\n      - arg: --disable=traefik\r\n        nodeFilters:\r\n          - server:*\n"})}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"k3d cluster create --config k3d-config.yaml\n"})}),"\n",(0,l.jsx)(r.h3,{id:"4-clean-up-regularly",children:"4. Clean Up Regularly"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Stop unused clusters\r\nk3d cluster stop old-cluster\r\n\r\n# Delete unused clusters\r\nk3d cluster delete old-cluster\r\n\r\n# Remove all clusters\r\nk3d cluster delete --all\r\n\r\n# Clean Docker\r\ndocker system prune\n"})}),"\n",(0,l.jsx)(r.h3,{id:"5-document-your-clusters",children:"5. Document Your Clusters"}),"\n",(0,l.jsx)(r.p,{children:"Keep a README with:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Cluster names and purposes"}),"\n",(0,l.jsx)(r.li,{children:"Port mappings"}),"\n",(0,l.jsx)(r.li,{children:"Special configurations"}),"\n",(0,l.jsx)(r.li,{children:"Dependencies between clusters"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"performance-considerations",children:"Performance Considerations"}),"\n",(0,l.jsx)(r.h3,{id:"resource-usage",children:"Resource Usage"}),"\n",(0,l.jsx)(r.p,{children:"Each K3d cluster uses:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"CPU"}),": ~0.5-1 vCPU idle, more under load"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Memory"}),": ~512MB minimum, 1-2GB comfortable"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Disk"}),": ~500MB per cluster"]}),"\n"]}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Recommendations:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Development machine"}),": 2-3 clusters maximum"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Powerful workstation"}),": 5-10 clusters possible"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"CI/CD"}),": Create/destroy as needed"]}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"optimization-tips",children:"Optimization Tips"}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Use agents sparingly"}),": Single server node often sufficient"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Disable unused features"}),": ",(0,l.jsx)(r.code,{children:'--k3s-arg "--disable=traefik@server:*"'})]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Limit running clusters"}),": Stop clusters when not in use"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Use slim images"}),": Keep container images small"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Monitor resources"}),": ",(0,l.jsx)(r.code,{children:"docker stats"})," to watch usage"]}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"when-to-use-k3s-vs-k3d",children:"When to Use K3s vs K3d"}),"\n",(0,l.jsx)(r.h3,{id:"use-k3s-directly-when",children:"Use K3s directly when:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"\u2705 Deploying to production"}),"\n",(0,l.jsx)(r.li,{children:"\u2705 Running on IoT devices or Raspberry Pi"}),"\n",(0,l.jsx)(r.li,{children:"\u2705 Managing edge deployments"}),"\n",(0,l.jsx)(r.li,{children:"\u2705 Need bare-metal performance"}),"\n",(0,l.jsx)(r.li,{children:"\u2705 Long-running, permanent clusters"}),"\n"]}),"\n",(0,l.jsx)(r.h3,{id:"use-k3d-when",children:"Use K3d when:"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"\u2705 Local development"}),"\n",(0,l.jsx)(r.li,{children:"\u2705 Testing Kubernetes configurations"}),"\n",(0,l.jsx)(r.li,{children:"\u2705 Learning Kubernetes"}),"\n",(0,l.jsx)(r.li,{children:"\u2705 CI/CD pipelines"}),"\n",(0,l.jsx)(r.li,{children:"\u2705 Multi-cluster development"}),"\n",(0,l.jsx)(r.li,{children:"\u2705 Demo environments"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,l.jsx)(r.p,{children:"Now that you understand K3s and K3d:"}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:(0,l.jsx)(r.a,{href:"/docs/local-setup/linkerd-overview",children:"Linkerd Service Mesh"})})," - Learn about service mesh capabilities"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:(0,l.jsx)(r.a,{href:"/docs/local-setup/traffic-splits",children:"Traffic Splits"})})," - Understand traffic management"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:(0,l.jsx)(r.a,{href:"/docs/local-setup/creating-clusters",children:"Creating Clusters"})})," - Hands-on: Build your multi-cluster setup"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:(0,l.jsx)(r.a,{href:"/docs/local-setup/installing-linkerd",children:"Installing Linkerd"})})," - Deploy Linkerd on your clusters"]}),"\n"]}),"\n",(0,l.jsx)(r.hr,{}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Resources:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:(0,l.jsx)(r.a,{href:"https://docs.k3s.io/",children:"K3s Official Documentation"})}),"\n",(0,l.jsx)(r.li,{children:(0,l.jsx)(r.a,{href:"https://k3d.io/",children:"K3d Official Documentation"})}),"\n",(0,l.jsx)(r.li,{children:(0,l.jsx)(r.a,{href:"https://github.com/k3s-io/k3s",children:"K3s GitHub Repository"})}),"\n",(0,l.jsx)(r.li,{children:(0,l.jsx)(r.a,{href:"https://github.com/k3d-io/k3d",children:"K3d GitHub Repository"})}),"\n"]})]})}function x(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,l.jsx)(r,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453:(e,r,n)=>{n.d(r,{R:()=>i,x:()=>c});var s=n(6540);const l={},t=s.createContext(l);function i(e){const r=s.useContext(t);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function c(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),s.createElement(t.Provider,{value:r},e.children)}},9365:(e,r,n)=>{n.d(r,{A:()=>i});n(6540);var s=n(4164);const l={tabItem:"tabItem_Ymn6"};var t=n(4848);function i({children:e,hidden:r,className:n}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,s.A)(l.tabItem,n),hidden:r,children:e})}}}]);