"use strict";(globalThis.webpackChunkdefogv_2_wiki=globalThis.webpackChunkdefogv_2_wiki||[]).push([[3568],{1470:(e,n,t)=>{t.d(n,{A:()=>C});var r=t(6540),l=t(4164),s=t(7559),i=t(3104),a=t(6347),c=t(205),d=t(7485),o=t(1682),u=t(679);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:n,children:t}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return h(e).map(({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r}))}(t);return function(e){const n=(0,o.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function x({value:e,tabValues:n}){return n.some(n=>n.value===e)}function k({queryString:e=!1,groupId:n}){const t=(0,a.W6)(),l=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(l),(0,r.useCallback)(e=>{if(!l)return;const n=new URLSearchParams(t.location.search);n.set(l,e),t.replace({...t.location,search:n.toString()})},[l,t])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:l}=e,s=p(e),[i,a]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:s})),[d,o]=k({queryString:t,groupId:l}),[h,m]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,l]=(0,u.Dv)(n);return[t,(0,r.useCallback)(e=>{n&&l.set(e)},[n,l])]}({groupId:l}),j=(()=>{const e=d??h;return x({value:e,tabValues:s})?e:null})();(0,c.A)(()=>{j&&a(j)},[j]);return{selectedValue:i,selectValue:(0,r.useCallback)(e=>{if(!x({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);a(e),o(e),m(e)},[o,m,s]),tabValues:s}}var j=t(2303);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=t(4848);function f({className:e,block:n,selectedValue:t,selectValue:r,tabValues:s}){const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,i.a_)(),d=e=>{const n=e.currentTarget,l=a.indexOf(n),i=s[l].value;i!==t&&(c(n),r(i))},o=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=a.indexOf(e.currentTarget)+1;n=a[t]??a[0];break}case"ArrowLeft":{const t=a.indexOf(e.currentTarget)-1;n=a[t]??a[a.length-1];break}}n?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":n},e),children:s.map(({value:e,label:n,attributes:r})=>(0,g.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{a.push(e)},onKeyDown:o,onClick:d,...r,className:(0,l.A)("tabs__item",b.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function v({lazy:e,children:n,selectedValue:t}){const s=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===t);return e?(0,r.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:s.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function y(e){const n=m(e);return(0,g.jsxs)("div",{className:(0,l.A)(s.G.tabs.container,"tabs-container",b.tabList),children:[(0,g.jsx)(f,{...n,...e}),(0,g.jsx)(v,{...n,...e})]})}function C(e){const n=(0,j.A)();return(0,g.jsx)(y,{...e,children:h(e.children)},String(n))}},7716:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>p,frontMatter:()=>c,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"install","title":"Installing Linkerd","description":"Step-by-step guide to installing Linkerd service mesh on your clusters","source":"@site/docs/install.mdx","sourceDirName":".","slug":"/install","permalink":"/defogv2-wiki/docs/install","draft":false,"unlisted":false,"editUrl":"https://github.com/aprountzos/defogv2-wiki/tree/main/docs/docs/install.mdx","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"title":"Installing Linkerd","description":"Step-by-step guide to installing Linkerd service mesh on your clusters","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Creating Clusters","permalink":"/defogv2-wiki/docs/cluster-creation"},"next":{"title":"Linking Clusters","permalink":"/defogv2-wiki/docs/linking"}}');var l=t(4848),s=t(8453),i=t(1470),a=t(9365);const c={title:"Installing Linkerd",description:"Step-by-step guide to installing Linkerd service mesh on your clusters",sidebar_position:5},d="Installing Linkerd",o={},u=[{value:"Overview",id:"overview",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Install Linkerd CLI",id:"install-linkerd-cli",level:3},{value:"Install step CLI",id:"install-step-cli",level:3},{value:"Understanding the Installation",id:"understanding-the-installation",level:2},{value:"Why Certificates?",id:"why-certificates",level:3},{value:"Installation Flow",id:"installation-flow",level:3},{value:"Step 1: Generate Trust Anchor",id:"step-1-generate-trust-anchor",level:2},{value:"Step 2: Install Linkerd on Top Cluster",id:"step-2-install-linkerd-on-top-cluster",level:2},{value:"Step 2.1: Generate Cluster Certificate",id:"step-21-generate-cluster-certificate",level:3},{value:"Step 2.2: Pre-flight Check",id:"step-22-pre-flight-check",level:3},{value:"Step 2.3: Install CRDs",id:"step-23-install-crds",level:3},{value:"Step 2.4: Install Control Plane",id:"step-24-install-control-plane",level:3},{value:"Step 2.5: Wait for Linkerd to be Ready",id:"step-25-wait-for-linkerd-to-be-ready",level:3},{value:"Step 2.6: Verify Installation",id:"step-26-verify-installation",level:3},{value:"Step 2.7: Install Viz Extension",id:"step-27-install-viz-extension",level:3},{value:"Step 2.8: Install Multicluster Extension",id:"step-28-install-multicluster-extension",level:3},{value:"Step 3: Install MetalLB on Top Cluster",id:"step-3-install-metallb-on-top-cluster",level:2},{value:"Step 3.1: Install MetalLB",id:"step-31-install-metallb",level:3},{value:"Step 3.2: Wait for MetalLB",id:"step-32-wait-for-metallb",level:3},{value:"Step 3.3: Configure IP Pool",id:"step-33-configure-ip-pool",level:3},{value:"Step 3.4: Verify Gateway Has IP",id:"step-34-verify-gateway-has-ip",level:3},{value:"Step 4: Install Linkerd on Mid Cluster",id:"step-4-install-linkerd-on-mid-cluster",level:2},{value:"Generate Mid Certificate",id:"generate-mid-certificate",level:3},{value:"Install Linkerd",id:"install-linkerd",level:3},{value:"Install MetalLB on Mid",id:"install-metallb-on-mid",level:3},{value:"Step 5: Install Linkerd on Bot Cluster",id:"step-5-install-linkerd-on-bot-cluster",level:2},{value:"Generate Bot Certificate",id:"generate-bot-certificate",level:3},{value:"Install Linkerd",id:"install-linkerd-1",level:3},{value:"Install MetalLB on Bot",id:"install-metallb-on-bot",level:3},{value:"Step 6: Verify All Installations",id:"step-6-verify-all-installations",level:2},{value:"Check All Clusters",id:"check-all-clusters",level:3},{value:"View Gateway IPs",id:"view-gateway-ips",level:3},{value:"View Linkerd Components",id:"view-linkerd-components",level:3},{value:"Understanding What You Installed",id:"understanding-what-you-installed",level:2},{value:"Linkerd Components per Cluster",id:"linkerd-components-per-cluster",level:3},{value:"Resource Usage",id:"resource-usage",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Pre-flight Checks Fail",id:"pre-flight-checks-fail",level:3},{value:"Control Plane Won&#39;t Start",id:"control-plane-wont-start",level:3},{value:"Gateway Has No IP",id:"gateway-has-no-ip",level:3},{value:"Viz Dashboard Won&#39;t Load",id:"viz-dashboard-wont-load",level:3},{value:"Quick Reference",id:"quick-reference",level:2},{value:"Installation Commands Summary",id:"installation-commands-summary",level:3},{value:"What&#39;s Next?",id:"whats-next",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"installing-linkerd",children:"Installing Linkerd"})}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(n.p,{children:"In this guide, you'll install Linkerd on all three clusters. Each cluster will get:"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TB\r\n    subgraph Cluster[Each Cluster Gets]\r\n        CRDs[Linkerd CRDs]\r\n        CP[Control Plane]\r\n        Viz[Viz Extension]\r\n        MC[Multicluster Extension]\r\n    end\r\n    \r\n    CRDs --\x3e CP\r\n    CP --\x3e Viz\r\n    Viz --\x3e MC"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"What you'll install:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Linkerd CRDs"})," - Custom resource definitions"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Control Plane"})," - Core Linkerd components"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Linkerd Viz"})," - Dashboard and metrics"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Multicluster"})," - Cross-cluster communication"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,l.jsx)(n.p,{children:"Before starting:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\u2705 Three K3d clusters running (",(0,l.jsx)(n.code,{children:"top"}),", ",(0,l.jsx)(n.code,{children:"mid"}),", ",(0,l.jsx)(n.code,{children:"bot"}),")"]}),"\n",(0,l.jsx)(n.li,{children:"\u2705 kubectl configured with access to all clusters"}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"Linkerd CLI"})," installed"]}),"\n",(0,l.jsxs)(n.li,{children:["\u2705 ",(0,l.jsx)(n.strong,{children:"step CLI"})," installed (for certificates)"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"install-linkerd-cli",children:"Install Linkerd CLI"}),"\n",(0,l.jsx)(n.p,{children:"If you haven't installed the Linkerd CLI yet:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Install specific version\r\nexport LINKERD2_VERSION=stable-2.14.10\r\ncurl --proto '=https' --tlsv1.2 -sSfL https://run.linkerd.io/install | sh\r\n\r\n# Add to PATH\r\nexport PATH=$PATH:$HOME/.linkerd2/bin\r\n\r\n# Verify installation\r\nlinkerd version\n"})}),"\n",(0,l.jsx)(n.p,{children:"Expected output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Client version: stable-2.14.10\r\nServer version: unavailable\n"})}),"\n",(0,l.jsx)(n.h3,{id:"install-step-cli",children:"Install step CLI"}),"\n",(0,l.jsx)(n.p,{children:"For certificate generation:"}),"\n",(0,l.jsxs)(i.A,{children:[(0,l.jsx)(a.A,{value:"mac",label:"macOS",default:!0,children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"brew install step\n"})})}),(0,l.jsx)(a.A,{value:"linux",label:"Linux",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"wget https://dl.step.sm/gh-release/cli/docs-ca-install/v0.25.0/step-cli_0.25.0_amd64.deb\r\nsudo dpkg -i step-cli_0.25.0_amd64.deb\n"})})}),(0,l.jsx)(a.A,{value:"windows",label:"Windows",children:(0,l.jsxs)(n.p,{children:["Download from ",(0,l.jsx)(n.a,{href:"https://github.com/smallstep/cli/releases",children:"GitHub Releases"})]})})]}),"\n",(0,l.jsx)(n.p,{children:"Verify:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"step version\n"})}),"\n",(0,l.jsx)(n.h2,{id:"understanding-the-installation",children:"Understanding the Installation"}),"\n",(0,l.jsx)(n.h3,{id:"why-certificates",children:"Why Certificates?"}),"\n",(0,l.jsx)(n.p,{children:"Linkerd uses mTLS (mutual TLS) for all service-to-service communication. This requires:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Trust Anchor"})," (Root CA) - Shared across all clusters"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Identity Issuer"})," (Intermediate CA) - Unique per cluster"]}),"\n"]}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TB\r\n    Root[Root CA - Trust Anchor<br/>Shared by all clusters]\r\n    \r\n    Root --\x3e Top[Top Cluster<br/>Identity Issuer]\r\n    Root --\x3e Mid[Mid Cluster<br/>Identity Issuer]\r\n    Root --\x3e Bot[Bot Cluster<br/>Identity Issuer]\r\n    \r\n    Top --\x3e TopProxies[Proxies get certificates]\r\n    Mid --\x3e MidProxies[Proxies get certificates]\r\n    Bot --\x3e BotProxies[Proxies get certificates]"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Why this matters:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"All clusters trust the same root"}),"\n",(0,l.jsx)(n.li,{children:"Each cluster issues its own certificates"}),"\n",(0,l.jsx)(n.li,{children:"Proxies can verify each other across clusters"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"installation-flow",children:"Installation Flow"}),"\n",(0,l.jsx)(n.p,{children:"For each cluster, we'll:"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph LR\r\n    Start[Start] --\x3e PreCheck[Pre-flight Check]\r\n    PreCheck --\x3e Certs[Generate Certificates]\r\n    Certs --\x3e CRDs[Install CRDs]\r\n    CRDs --\x3e CP[Install Control Plane]\r\n    CP --\x3e Check[Verify Installation]\r\n    Check --\x3e Viz[Install Viz]\r\n    Viz --\x3e MC[Install Multicluster]\r\n    MC --\x3e Done[Cluster Ready]"}),"\n",(0,l.jsx)(n.h2,{id:"step-1-generate-trust-anchor",children:"Step 1: Generate Trust Anchor"}),"\n",(0,l.jsx)(n.p,{children:"Create a shared root certificate for all clusters."}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Create temporary directory for certificates\r\nmkdir -p ~/linkerd-certs\r\ncd ~/linkerd-certs\r\n\r\n# Generate root certificate (trust anchor)\r\nstep certificate create \\\r\n  root.linkerd.cluster.local \\\r\n  ca.crt ca.key \\\r\n  --profile root-ca \\\r\n  --no-password \\\r\n  --insecure \\\r\n  --force\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"What this creates:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ca.crt"})," - Root certificate (public)"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"ca.key"})," - Root private key (keep secret!)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Verify:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"step certificate inspect ca.crt\n"})}),"\n",(0,l.jsx)(n.p,{children:"You should see:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"Certificate:\r\n    Subject:     root.linkerd.cluster.local\r\n    Issuer:      root.linkerd.cluster.local\r\n    ...\n"})}),"\n",(0,l.jsx)(n.h2,{id:"step-2-install-linkerd-on-top-cluster",children:"Step 2: Install Linkerd on Top Cluster"}),"\n",(0,l.jsx)(n.h3,{id:"step-21-generate-cluster-certificate",children:"Step 2.1: Generate Cluster Certificate"}),"\n",(0,l.jsxs)(n.p,{children:["Create an identity issuer certificate for the ",(0,l.jsx)(n.code,{children:"top"})," cluster:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"step certificate create \\\r\n  identity.linkerd.top.k3d.example.com \\\r\n  top-issuer.crt top-issuer.key \\\r\n  --ca ca.crt \\\r\n  --ca-key ca.key \\\r\n  --profile intermediate-ca \\\r\n  --not-after 8760h \\\r\n  --no-password \\\r\n  --insecure\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-22-pre-flight-check",children:"Step 2.2: Pre-flight Check"}),"\n",(0,l.jsx)(n.p,{children:"Verify the cluster is ready for Linkerd:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd check --pre --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:"All checks should pass with \u2714:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"kubernetes-api\r\n--------------\r\n\u2714 can initialize the client\r\n\u2714 can query the Kubernetes API\r\n\r\nkubernetes-version\r\n------------------\r\n\u2714 is running the minimum Kubernetes API version\r\n...\n"})}),"\n",(0,l.jsx)(n.p,{children:"If any checks fail, resolve them before continuing."}),"\n",(0,l.jsx)(n.h3,{id:"step-23-install-crds",children:"Step 2.3: Install CRDs"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd install --crds --context k3d-top | \\\r\n  kubectl apply --context k3d-top -f -\n"})}),"\n",(0,l.jsx)(n.p,{children:"Expected output:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"customresourcedefinition.apiextensions.k8s.io/servers.policy.linkerd.io created\r\ncustomresourcedefinition.apiextensions.k8s.io/serviceprofiles.linkerd.io created\r\n...\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-24-install-control-plane",children:"Step 2.4: Install Control Plane"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd install \\\r\n  --context k3d-top \\\r\n  --cluster-domain top.k3d.example.com \\\r\n  --identity-trust-domain top.k3d.example.com \\\r\n  --identity-trust-anchors-file ca.crt \\\r\n  --identity-issuer-certificate-file top-issuer.crt \\\r\n  --identity-issuer-key-file top-issuer.key | \\\r\n  kubectl apply --context k3d-top -f -\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"What each flag does:"})}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Flag"}),(0,l.jsx)(n.th,{children:"Purpose"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--cluster-domain"})}),(0,l.jsx)(n.td,{children:"DNS domain for this cluster"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--identity-trust-domain"})}),(0,l.jsx)(n.td,{children:"Trust domain for mTLS"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--identity-trust-anchors-file"})}),(0,l.jsx)(n.td,{children:"Root CA certificate"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--identity-issuer-certificate-file"})}),(0,l.jsx)(n.td,{children:"Cluster's issuer cert"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"--identity-issuer-key-file"})}),(0,l.jsx)(n.td,{children:"Cluster's issuer key"})]})]})]}),"\n",(0,l.jsx)(n.h3,{id:"step-25-wait-for-linkerd-to-be-ready",children:"Step 2.5: Wait for Linkerd to be Ready"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Watch pods starting\r\nkubectl get pods -n linkerd --context k3d-top --watch\r\n\r\n# Wait for all pods to be ready (Ctrl+C when done)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-26-verify-installation",children:"Step 2.6: Verify Installation"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd check --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:"All checks should pass! You should see:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"linkerd-existence\r\n-----------------\r\n\u2714 'linkerd-config' config map exists\r\n\u2714 heartbeat ServiceAccount exist\r\n\u2714 control plane replica sets are ready\r\n...\r\n\r\nStatus check results are \u2714\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-27-install-viz-extension",children:"Step 2.7: Install Viz Extension"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd viz install --context k3d-top | \\\r\n  kubectl apply --context k3d-top -f -\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Wait for Viz to be ready:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl wait --for=condition=ready pod \\\r\n  --all -n linkerd-viz \\\r\n  --context k3d-top \\\r\n  --timeout=300s\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Verify:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd viz check --context k3d-top\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-28-install-multicluster-extension",children:"Step 2.8: Install Multicluster Extension"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd multicluster install --context k3d-top | \\\r\n  kubectl apply --context k3d-top -f -\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Wait for gateway to be ready:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl wait --for=condition=ready pod \\\r\n  -n linkerd-multicluster \\\r\n  -l app=linkerd-gateway \\\r\n  --context k3d-top \\\r\n  --timeout=120s\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Verify:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd multicluster check --context k3d-top\n"})}),"\n",(0,l.jsx)(n.h2,{id:"step-3-install-metallb-on-top-cluster",children:"Step 3: Install MetalLB on Top Cluster"}),"\n",(0,l.jsx)(n.p,{children:"Linkerd multicluster gateways need LoadBalancer IPs. We'll use MetalLB."}),"\n",(0,l.jsx)(n.h3,{id:"step-31-install-metallb",children:"Step 3.1: Install MetalLB"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl apply --context k3d-top -f \\\r\n  https://raw.githubusercontent.com/metallb/metallb/v0.14.8/config/manifests/metallb-native.yaml\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-32-wait-for-metallb",children:"Step 3.2: Wait for MetalLB"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl wait --namespace metallb-system \\\r\n  --for=condition=ready pod \\\r\n  --selector=app=metallb \\\r\n  --context k3d-top \\\r\n  --timeout=120s\n"})}),"\n",(0,l.jsx)(n.h3,{id:"step-33-configure-ip-pool",children:"Step 3.3: Configure IP Pool"}),"\n",(0,l.jsx)(n.p,{children:"First, find your Docker network subnet:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"docker network inspect multicluster-example \\\r\n  --format '{{range .IPAM.Config}}{{.Subnet}}{{end}}'\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Example output: ",(0,l.jsx)(n.code,{children:"172.18.0.0/16"})]}),"\n",(0,l.jsx)(n.p,{children:"Get the top cluster's server IP:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"docker inspect k3d-top-server-0 \\\r\n  --format '{{range .NetworkSettings.Networks}}{{.IPAddress}}{{end}}'\n"})}),"\n",(0,l.jsxs)(n.p,{children:["Example output: ",(0,l.jsx)(n.code,{children:"172.18.0.3"})]}),"\n",(0,l.jsx)(n.p,{children:"Create IP pool (adjust IPs based on your subnet):"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl apply --context k3d-top -f - <<EOF\r\napiVersion: metallb.io/v1beta1\r\nkind: IPAddressPool\r\nmetadata:\r\n  name: default-pool\r\n  namespace: metallb-system\r\nspec:\r\n  addresses:\r\n  - 172.18.0.200-172.18.0.210\r\n---\r\napiVersion: metallb.io/v1beta1\r\nkind: L2Advertisement\r\nmetadata:\r\n  name: default\r\n  namespace: metallb-system\r\nspec:\r\n  ipAddressPools:\r\n  - default-pool\r\nEOF\n"})}),"\n",(0,l.jsx)(n.admonition,{title:"IP Range",type:"tip",children:(0,l.jsxs)(n.p,{children:["Choose an IP range within your Docker network subnet that won't conflict with existing containers. The ",(0,l.jsx)(n.code,{children:".200-.210"})," range is usually safe."]})}),"\n",(0,l.jsx)(n.h3,{id:"step-34-verify-gateway-has-ip",children:"Step 3.4: Verify Gateway Has IP"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get svc -n linkerd-multicluster linkerd-gateway --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:"You should see an EXTERNAL-IP assigned:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"NAME              TYPE           CLUSTER-IP      EXTERNAL-IP    PORT(S)\r\nlinkerd-gateway   LoadBalancer   10.43.xxx.xxx   172.18.0.200   4143:xxxxx/TCP\n"})}),"\n",(0,l.jsx)(n.h2,{id:"step-4-install-linkerd-on-mid-cluster",children:"Step 4: Install Linkerd on Mid Cluster"}),"\n",(0,l.jsxs)(n.p,{children:["Repeat the process for the ",(0,l.jsx)(n.code,{children:"mid"})," cluster."]}),"\n",(0,l.jsx)(n.h3,{id:"generate-mid-certificate",children:"Generate Mid Certificate"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/linkerd-certs\r\n\r\nstep certificate create \\\r\n  identity.linkerd.mid.k3d.example.com \\\r\n  mid-issuer.crt mid-issuer.key \\\r\n  --ca ca.crt \\\r\n  --ca-key ca.key \\\r\n  --profile intermediate-ca \\\r\n  --not-after 8760h \\\r\n  --no-password \\\r\n  --insecure\n"})}),"\n",(0,l.jsx)(n.h3,{id:"install-linkerd",children:"Install Linkerd"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Pre-check\r\nlinkerd check --pre --context k3d-mid\r\n\r\n# CRDs\r\nlinkerd install --crds --context k3d-mid | \\\r\n  kubectl apply --context k3d-mid -f -\r\n\r\n# Control Plane\r\nlinkerd install \\\r\n  --context k3d-mid \\\r\n  --cluster-domain mid.k3d.example.com \\\r\n  --identity-trust-domain mid.k3d.example.com \\\r\n  --identity-trust-anchors-file ca.crt \\\r\n  --identity-issuer-certificate-file mid-issuer.crt \\\r\n  --identity-issuer-key-file mid-issuer.key | \\\r\n  kubectl apply --context k3d-mid -f -\r\n\r\n# Verify\r\nlinkerd check --context k3d-mid\r\n\r\n# Viz\r\nlinkerd viz install --context k3d-mid | \\\r\n  kubectl apply --context k3d-mid -f -\r\n\r\nkubectl wait --for=condition=ready pod \\\r\n  --all -n linkerd-viz \\\r\n  --context k3d-mid \\\r\n  --timeout=300s\r\n\r\nlinkerd viz check --context k3d-mid\r\n\r\n# Multicluster\r\nlinkerd multicluster install --context k3d-mid | \\\r\n  kubectl apply --context k3d-mid -f -\r\n\r\nkubectl wait --for=condition=ready pod \\\r\n  -n linkerd-multicluster \\\r\n  -l app=linkerd-gateway \\\r\n  --context k3d-mid \\\r\n  --timeout=120s\r\n\r\nlinkerd multicluster check --context k3d-mid\n"})}),"\n",(0,l.jsx)(n.h3,{id:"install-metallb-on-mid",children:"Install MetalLB on Mid"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Install MetalLB\r\nkubectl apply --context k3d-mid -f \\\r\n  https://raw.githubusercontent.com/metallb/metallb/v0.14.8/config/manifests/metallb-native.yaml\r\n\r\n# Wait\r\nkubectl wait --namespace metallb-system \\\r\n  --for=condition=ready pod \\\r\n  --selector=app=metallb \\\r\n  --context k3d-mid \\\r\n  --timeout=120s\r\n\r\n# Configure IP pool (use different range than top!)\r\nkubectl apply --context k3d-mid -f - <<EOF\r\napiVersion: metallb.io/v1beta1\r\nkind: IPAddressPool\r\nmetadata:\r\n  name: default-pool\r\n  namespace: metallb-system\r\nspec:\r\n  addresses:\r\n  - 172.18.0.210-172.18.0.220\r\n---\r\napiVersion: metallb.io/v1beta1\r\nkind: L2Advertisement\r\nmetadata:\r\n  name: default\r\n  namespace: metallb-system\r\nspec:\r\n  ipAddressPools:\r\n  - default-pool\r\nEOF\r\n\r\n# Verify gateway IP\r\nkubectl get svc -n linkerd-multicluster linkerd-gateway --context k3d-mid\n"})}),"\n",(0,l.jsx)(n.h2,{id:"step-5-install-linkerd-on-bot-cluster",children:"Step 5: Install Linkerd on Bot Cluster"}),"\n",(0,l.jsx)(n.p,{children:"Final cluster installation."}),"\n",(0,l.jsx)(n.h3,{id:"generate-bot-certificate",children:"Generate Bot Certificate"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"cd ~/linkerd-certs\r\n\r\nstep certificate create \\\r\n  identity.linkerd.bot.k3d.example.com \\\r\n  bot-issuer.crt bot-issuer.key \\\r\n  --ca ca.crt \\\r\n  --ca-key ca.key \\\r\n  --profile intermediate-ca \\\r\n  --not-after 8760h \\\r\n  --no-password \\\r\n  --insecure\n"})}),"\n",(0,l.jsx)(n.h3,{id:"install-linkerd-1",children:"Install Linkerd"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Pre-check\r\nlinkerd check --pre --context k3d-bot\r\n\r\n# CRDs\r\nlinkerd install --crds --context k3d-bot | \\\r\n  kubectl apply --context k3d-bot -f -\r\n\r\n# Control Plane\r\nlinkerd install \\\r\n  --context k3d-bot \\\r\n  --cluster-domain bot.k3d.example.com \\\r\n  --identity-trust-domain bot.k3d.example.com \\\r\n  --identity-trust-anchors-file ca.crt \\\r\n  --identity-issuer-certificate-file bot-issuer.crt \\\r\n  --identity-issuer-key-file bot-issuer.key | \\\r\n  kubectl apply --context k3d-bot -f -\r\n\r\n# Verify\r\nlinkerd check --context k3d-bot\r\n\r\n# Viz\r\nlinkerd viz install --context k3d-bot | \\\r\n  kubectl apply --context k3d-bot -f -\r\n\r\nkubectl wait --for=condition=ready pod \\\r\n  --all -n linkerd-viz \\\r\n  --context k3d-bot \\\r\n  --timeout=300s\r\n\r\nlinkerd viz check --context k3d-bot\r\n\r\n# Multicluster\r\nlinkerd multicluster install --context k3d-bot | \\\r\n  kubectl apply --context k3d-bot -f -\r\n\r\nkubectl wait --for=condition=ready pod \\\r\n  -n linkerd-multicluster \\\r\n  -l app=linkerd-gateway \\\r\n  --context k3d-bot \\\r\n  --timeout=120s\r\n\r\nlinkerd multicluster check --context k3d-bot\n"})}),"\n",(0,l.jsx)(n.h3,{id:"install-metallb-on-bot",children:"Install MetalLB on Bot"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Install MetalLB\r\nkubectl apply --context k3d-bot -f \\\r\n  https://raw.githubusercontent.com/metallb/metallb/v0.14.8/config/manifests/metallb-native.yaml\r\n\r\n# Wait\r\nkubectl wait --namespace metallb-system \\\r\n  --for=condition=ready pod \\\r\n  --selector=app=metallb \\\r\n  --context k3d-bot \\\r\n  --timeout=120s\r\n\r\n# Configure IP pool (use different range!)\r\nkubectl apply --context k3d-bot -f - <<EOF\r\napiVersion: metallb.io/v1beta1\r\nkind: IPAddressPool\r\nmetadata:\r\n  name: default-pool\r\n  namespace: metallb-system\r\nspec:\r\n  addresses:\r\n  - 172.18.0.220-172.18.0.230\r\n---\r\napiVersion: metallb.io/v1beta1\r\nkind: L2Advertisement\r\nmetadata:\r\n  name: default\r\n  namespace: metallb-system\r\nspec:\r\n  ipAddressPools:\r\n  - default-pool\r\nEOF\r\n\r\n# Verify gateway IP\r\nkubectl get svc -n linkerd-multicluster linkerd-gateway --context k3d-bot\n"})}),"\n",(0,l.jsx)(n.h2,{id:"step-6-verify-all-installations",children:"Step 6: Verify All Installations"}),"\n",(0,l.jsx)(n.h3,{id:"check-all-clusters",children:"Check All Clusters"}),"\n",(0,l.jsx)(n.p,{children:"Run checks on all clusters:"}),"\n",(0,l.jsxs)(i.A,{children:[(0,l.jsx)(a.A,{value:"top",label:"Top Cluster",default:!0,children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd check --context k3d-top\r\nlinkerd viz check --context k3d-top\r\nlinkerd multicluster check --context k3d-top\n"})})}),(0,l.jsx)(a.A,{value:"mid",label:"Mid Cluster",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd check --context k3d-mid\r\nlinkerd viz check --context k3d-mid\r\nlinkerd multicluster check --context k3d-mid\n"})})}),(0,l.jsx)(a.A,{value:"bot",label:"Bot Cluster",children:(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd check --context k3d-bot\r\nlinkerd viz check --context k3d-bot\r\nlinkerd multicluster check --context k3d-bot\n"})})})]}),"\n",(0,l.jsx)(n.p,{children:"All checks should pass!"}),"\n",(0,l.jsx)(n.h3,{id:"view-gateway-ips",children:"View Gateway IPs"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:'echo "=== Gateway IPs ==="\r\necho -n "Top: "\r\nkubectl get svc -n linkerd-multicluster linkerd-gateway --context k3d-top -o jsonpath=\'{.status.loadBalancer.ingress[0].ip}\'\r\necho ""\r\n\r\necho -n "Mid: "\r\nkubectl get svc -n linkerd-multicluster linkerd-gateway --context k3d-mid -o jsonpath=\'{.status.loadBalancer.ingress[0].ip}\'\r\necho ""\r\n\r\necho -n "Bot: "\r\nkubectl get svc -n linkerd-multicluster linkerd-gateway --context k3d-bot -o jsonpath=\'{.status.loadBalancer.ingress[0].ip}\'\r\necho ""\n'})}),"\n",(0,l.jsx)(n.p,{children:"Save these IPs - you'll need them for linking clusters!"}),"\n",(0,l.jsx)(n.h3,{id:"view-linkerd-components",children:"View Linkerd Components"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Control plane pods\r\nkubectl get pods -n linkerd --context k3d-top\r\n\r\n# Viz pods\r\nkubectl get pods -n linkerd-viz --context k3d-top\r\n\r\n# Multicluster pods\r\nkubectl get pods -n linkerd-multicluster --context k3d-top\n"})}),"\n",(0,l.jsx)(n.h2,{id:"understanding-what-you-installed",children:"Understanding What You Installed"}),"\n",(0,l.jsx)(n.h3,{id:"linkerd-components-per-cluster",children:"Linkerd Components per Cluster"}),"\n",(0,l.jsx)(n.mermaid,{value:"graph TB\r\n    subgraph CP[Control Plane - linkerd namespace]\r\n        Identity[linkerd-identity]\r\n        Destination[linkerd-destination]\r\n        ProxyInj[linkerd-proxy-injector]\r\n    end\r\n    \r\n    subgraph Viz[Viz Extension - linkerd-viz namespace]\r\n        Prometheus[prometheus]\r\n        Grafana[grafana]\r\n        Web[web]\r\n        Tap[tap]\r\n    end\r\n    \r\n    subgraph MC[Multicluster - linkerd-multicluster namespace]\r\n        Gateway[linkerd-gateway]\r\n        Mirror[service-mirror]\r\n    end"}),"\n",(0,l.jsx)(n.h3,{id:"resource-usage",children:"Resource Usage"}),"\n",(0,l.jsx)(n.p,{children:"Check how much each component uses:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl top pods -n linkerd --context k3d-top\r\nkubectl top pods -n linkerd-viz --context k3d-top\r\nkubectl top pods -n linkerd-multicluster --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:"Typical usage:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Control plane"}),": ~200-300MB RAM total"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Viz"}),": ~500-700MB RAM total"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Multicluster"}),": ~50-100MB RAM total"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"pre-flight-checks-fail",children:"Pre-flight Checks Fail"}),"\n",(0,l.jsxs)(n.p,{children:["If ",(0,l.jsx)(n.code,{children:"linkerd check --pre"})," fails:"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Missing CRDs:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Check if CRDs exist\r\nkubectl get crds | grep linkerd\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Kubernetes version too old:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl version --short\n"})}),"\n",(0,l.jsx)(n.p,{children:"K3s should be 1.21+."}),"\n",(0,l.jsx)(n.h3,{id:"control-plane-wont-start",children:"Control Plane Won't Start"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check pod status:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n linkerd --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"View pod logs:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n linkerd -l linkerd.io/control-plane-component=identity --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Common issues:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Certificate problems: Regenerate certificates"}),"\n",(0,l.jsxs)(n.li,{children:["Resource limits: Check ",(0,l.jsx)(n.code,{children:"kubectl top nodes"})]}),"\n",(0,l.jsx)(n.li,{children:"Image pull failures: Check internet connection"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"gateway-has-no-ip",children:"Gateway Has No IP"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check MetalLB pods:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n metallb-system --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"View MetalLB logs:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl logs -n metallb-system -l app=metallb --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check IP pool:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get ipaddresspool -n metallb-system --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Recreate if needed:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl delete ipaddresspool default-pool -n metallb-system --context k3d-top\r\n# Then recreate with correct IPs\n"})}),"\n",(0,l.jsx)(n.h3,{id:"viz-dashboard-wont-load",children:"Viz Dashboard Won't Load"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Check Viz pods:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"kubectl get pods -n linkerd-viz --context k3d-top\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Try accessing directly:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"linkerd viz dashboard --context k3d-top\n"})}),"\n",(0,l.jsx)(n.h2,{id:"quick-reference",children:"Quick Reference"}),"\n",(0,l.jsx)(n.h3,{id:"installation-commands-summary",children:"Installation Commands Summary"}),"\n",(0,l.jsx)(n.p,{children:"For each cluster:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# 1. Generate cluster certificate\r\nstep certificate create identity.linkerd.CLUSTER.k3d.example.com \\\r\n  CLUSTER-issuer.crt CLUSTER-issuer.key \\\r\n  --ca ca.crt --ca-key ca.key \\\r\n  --profile intermediate-ca --not-after 8760h \\\r\n  --no-password --insecure\r\n\r\n# 2. Install Linkerd\r\nlinkerd check --pre --context k3d-CLUSTER\r\nlinkerd install --crds --context k3d-CLUSTER | kubectl apply --context k3d-CLUSTER -f -\r\nlinkerd install \\\r\n  --context k3d-CLUSTER \\\r\n  --cluster-domain CLUSTER.k3d.example.com \\\r\n  --identity-trust-domain CLUSTER.k3d.example.com \\\r\n  --identity-trust-anchors-file ca.crt \\\r\n  --identity-issuer-certificate-file CLUSTER-issuer.crt \\\r\n  --identity-issuer-key-file CLUSTER-issuer.key | \\\r\n  kubectl apply --context k3d-CLUSTER -f -\r\n\r\n# 3. Verify\r\nlinkerd check --context k3d-CLUSTER\r\n\r\n# 4. Install Viz\r\nlinkerd viz install --context k3d-CLUSTER | kubectl apply --context k3d-CLUSTER -f -\r\nlinkerd viz check --context k3d-CLUSTER\r\n\r\n# 5. Install Multicluster\r\nlinkerd multicluster install --context k3d-CLUSTER | kubectl apply --context k3d-CLUSTER -f -\r\nlinkerd multicluster check --context k3d-CLUSTER\r\n\r\n# 6. Install MetalLB (adjust IP ranges!)\r\nkubectl apply --context k3d-CLUSTER -f \\\r\n  https://raw.githubusercontent.com/metallb/metallb/v0.14.8/config/manifests/metallb-native.yaml\r\n# Then configure IP pool\n"})}),"\n",(0,l.jsx)(n.h2,{id:"whats-next",children:"What's Next?"}),"\n",(0,l.jsx)(n.p,{children:"Linkerd is now installed on all clusters! Next:"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/docs/local-setup/linking-clusters",children:"Linking Clusters"})})," - Connect clusters for cross-cluster communication"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:(0,l.jsx)(n.a,{href:"/docs/local-setup/testing-connectivity",children:"Testing Connectivity"})})," - Deploy apps and test"]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Resources:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://linkerd.io/2.14/tasks/install/",children:"Linkerd Installation Guide"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://linkerd.io/2.14/tasks/multicluster/",children:"Linkerd Multicluster"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.a,{href:"https://metallb.universe.tf/configuration/",children:"MetalLB Configuration"})}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var r=t(6540);const l={},s=r.createContext(l);function i(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),r.createElement(s.Provider,{value:n},e.children)}},9365:(e,n,t)=>{t.d(n,{A:()=>i});t(6540);var r=t(4164);const l={tabItem:"tabItem_Ymn6"};var s=t(4848);function i({children:e,hidden:n,className:t}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,r.A)(l.tabItem,t),hidden:n,children:e})}}}]);