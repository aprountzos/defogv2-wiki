"use strict";(globalThis.webpackChunkdefogv_2_wiki=globalThis.webpackChunkdefogv_2_wiki||[]).push([[9794],{1470:(e,r,n)=>{n.d(r,{A:()=>S});var i=n(6540),s=n(4164),t=n(7559),l=n(3104),a=n(6347),c=n(205),o=n(7485),d=n(1682),u=n(679);function h(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){const{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function p(e){const{values:r,children:n}=e;return(0,i.useMemo)(()=>{const e=r??function(e){return h(e).map(({props:{value:e,label:r,attributes:n,default:i}})=>({value:e,label:r,attributes:n,default:i}))}(n);return function(e){const r=(0,d.XI)(e,(e,r)=>e.value===r.value);if(r.length>0)throw new Error(`Docusaurus error: Duplicate values "${r.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[r,n])}function x({value:e,tabValues:r}){return r.some(r=>r.value===e)}function f({queryString:e=!1,groupId:r}){const n=(0,a.W6)(),s=function({queryString:e=!1,groupId:r}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!r)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:e,groupId:r});return[(0,o.aZ)(s),(0,i.useCallback)(e=>{if(!s)return;const r=new URLSearchParams(n.location.search);r.set(s,e),n.replace({...n.location,search:r.toString()})},[s,n])]}function m(e){const{defaultValue:r,queryString:n=!1,groupId:s}=e,t=p(e),[l,a]=(0,i.useState)(()=>function({defaultValue:e,tabValues:r}){if(0===r.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!x({value:e,tabValues:r}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${r.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const n=r.find(e=>e.default)??r[0];if(!n)throw new Error("Unexpected error: 0 tabValues");return n.value}({defaultValue:r,tabValues:t})),[o,d]=f({queryString:n,groupId:s}),[h,m]=function({groupId:e}){const r=function(e){return e?`docusaurus.tab.${e}`:null}(e),[n,s]=(0,u.Dv)(r);return[n,(0,i.useCallback)(e=>{r&&s.set(e)},[r,s])]}({groupId:s}),j=(()=>{const e=o??h;return x({value:e,tabValues:t})?e:null})();(0,c.A)(()=>{j&&a(j)},[j]);return{selectedValue:l,selectValue:(0,i.useCallback)(e=>{if(!x({value:e,tabValues:t}))throw new Error(`Can't select invalid tab value=${e}`);a(e),d(e),m(e)},[d,m,t]),tabValues:t}}var j=n(2303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var g=n(4848);function b({className:e,block:r,selectedValue:n,selectValue:i,tabValues:t}){const a=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),o=e=>{const r=e.currentTarget,s=a.indexOf(r),l=t[s].value;l!==n&&(c(r),i(l))},d=e=>{let r=null;switch(e.key){case"Enter":o(e);break;case"ArrowRight":{const n=a.indexOf(e.currentTarget)+1;r=a[n]??a[0];break}case"ArrowLeft":{const n=a.indexOf(e.currentTarget)-1;r=a[n]??a[a.length-1];break}}r?.focus()};return(0,g.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":r},e),children:t.map(({value:e,label:r,attributes:i})=>(0,g.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{a.push(e)},onKeyDown:d,onClick:o,...i,className:(0,s.A)("tabs__item",v.tabItem,i?.className,{"tabs__item--active":n===e}),children:r??e},e))})}function y({lazy:e,children:r,selectedValue:n}){const t=(Array.isArray(r)?r:[r]).filter(Boolean);if(e){const e=t.find(e=>e.props.value===n);return e?(0,i.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,g.jsx)("div",{className:"margin-top--md",children:t.map((e,r)=>(0,i.cloneElement)(e,{key:r,hidden:e.props.value!==n}))})}function k(e){const r=m(e);return(0,g.jsxs)("div",{className:(0,s.A)(t.G.tabs.container,"tabs-container",v.tabList),children:[(0,g.jsx)(b,{...r,...e}),(0,g.jsx)(y,{...r,...e})]})}function S(e){const r=(0,j.A)();return(0,g.jsx)(k,{...e,children:h(e.children)},String(r))}},4135:(e,r,n)=>{n.r(r),n.d(r,{assets:()=>d,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>u});const i=JSON.parse('{"id":"local-setup/linkerd","title":"Linkerd Service Mesh","description":"Understanding Linkerd service mesh architecture and capabilities","source":"@site/docs/local-setup/linkerd.mdx","sourceDirName":"local-setup","slug":"/local-setup/linkerd","permalink":"/defogv2-wiki/docs/local-setup/linkerd","draft":false,"unlisted":false,"editUrl":"https://github.com/aprountzos/defogv2-wiki/tree/main/docs/docs/local-setup/linkerd.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Linkerd Service Mesh","description":"Understanding Linkerd service mesh architecture and capabilities","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Translate your site","permalink":"/defogv2-wiki/docs/tutorial-extras/translate-your-site"}}');var s=n(4848),t=n(8453),l=n(1470),a=n(9365);const c={title:"Linkerd Service Mesh",description:"Understanding Linkerd service mesh architecture and capabilities",sidebar_position:2},o="Linkerd Service Mesh",d={},u=[{value:"What is Linkerd?",id:"what-is-linkerd",level:2},{value:"Core Architecture",id:"core-architecture",level:2},{value:"Control Plane",id:"control-plane",level:3},{value:"Data Plane",id:"data-plane",level:3},{value:"Key Features",id:"key-features",level:2},{value:"1. Automatic Mutual TLS (mTLS)",id:"1-automatic-mutual-tls-mtls",level:3},{value:"2. Observability",id:"2-observability",level:3},{value:"3. Traffic Management",id:"3-traffic-management",level:3},{value:"4. Multi-Cluster Support",id:"4-multi-cluster-support",level:3},{value:"Linkerd Components",id:"linkerd-components",level:2},{value:"Core Installation",id:"core-installation",level:3},{value:"Linkerd Multicluster",id:"linkerd-multicluster",level:2},{value:"Architecture",id:"architecture",level:3},{value:"How It Works",id:"how-it-works",level:3},{value:"Components",id:"components",level:3},{value:"Traffic Flow Example",id:"traffic-flow-example",level:3},{value:"Linkerd Viz Dashboard",id:"linkerd-viz-dashboard",level:2},{value:"Features",id:"features",level:3},{value:"Accessing the Dashboard",id:"accessing-the-dashboard",level:3},{value:"Live Traffic Tap",id:"live-traffic-tap",level:3},{value:"Benefits for Multi-Cluster Environments",id:"benefits-for-multi-cluster-environments",level:2},{value:"Security",id:"security",level:3},{value:"Reliability",id:"reliability",level:3},{value:"Observability",id:"observability",level:3},{value:"Performance",id:"performance",level:3},{value:"Common Use Cases",id:"common-use-cases",level:2},{value:"1. Canary Deployments",id:"1-canary-deployments",level:3},{value:"2. Cross-Cluster Failover",id:"2-cross-cluster-failover",level:3},{value:"3. Multi-Tenant Isolation",id:"3-multi-tenant-isolation",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Certificate Management",id:"1-certificate-management",level:3},{value:"2. Resource Limits",id:"2-resource-limits",level:3},{value:"3. Namespace Injection",id:"3-namespace-injection",level:3},{value:"4. Service Profiles",id:"4-service-profiles",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Check Linkerd Status",id:"check-linkerd-status",level:3},{value:"View Proxy Logs",id:"view-proxy-logs",level:3},{value:"Debug Service Mesh",id:"debug-service-mesh",level:3},{value:"Next Steps",id:"next-steps",level:2}];function h(e){const r={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.header,{children:(0,s.jsx)(r.h1,{id:"linkerd-service-mesh",children:"Linkerd Service Mesh"})}),"\n",(0,s.jsx)(r.h2,{id:"what-is-linkerd",children:"What is Linkerd?"}),"\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Linkerd"})," is an open-source, ultra-light service mesh for Kubernetes. It provides critical features like observability, reliability, and security to your microservices without requiring any code changes to your applications."]}),"\n",(0,s.jsx)(r.admonition,{title:"Version",type:"info",children:(0,s.jsxs)(r.p,{children:["This guide uses ",(0,s.jsx)(r.strong,{children:"Linkerd stable-2.14.10"}),", a production-ready version optimized for multi-cluster deployments."]})}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#667eea','primaryTextColor':'#fff','primaryBorderColor':'#4c63e8','lineColor':'#8099ec','background':'transparent','mainBkg':'#667eea','clusterBkg':'transparent','clusterBorder':'#4c63e8','fontSize':'14px'}}}%%\r\ngraph TB\r\n    subgraph App[\"Your Application\"]\r\n        S1[\"Service A\"]\r\n        S2[\"Service B\"]\r\n        S3[\"Service C\"]\r\n    end\r\n    \r\n    subgraph Linkerd[\"Linkerd Service Mesh\"]\r\n        CP[\"Control Plane<br/>Management\"]\r\n        DP[\"Data Plane<br/>Proxies\"]\r\n    end\r\n    \r\n    S1 <--\x3e DP\r\n    S2 <--\x3e DP\r\n    S3 <--\x3e DP\r\n    DP <--\x3e CP\r\n    \r\n    Features[\"\u2705 Automatic mTLS<br/>\u2705 Traffic Management<br/>\u2705 Observability<br/>\u2705 Reliability\"]\r\n    \r\n    Linkerd -.-> Features\r\n    \r\n    classDef appStyle fill:#8099ec,stroke:#5e7ae9,stroke-width:2px,color:#fff\r\n    classDef meshStyle fill:#667eea,stroke:#4c63e8,stroke-width:3px,color:#fff\r\n    classDef featureStyle fill:#8fa8ed,stroke:#667eea,stroke-width:2px,color:#fff\r\n    \r\n    class S1,S2,S3 appStyle\r\n    class CP,DP meshStyle\r\n    class Features featureStyle"}),"\n",(0,s.jsx)(r.h2,{id:"core-architecture",children:"Core Architecture"}),"\n",(0,s.jsxs)(r.p,{children:["Linkerd's architecture consists of two main components: the ",(0,s.jsx)(r.strong,{children:"Control Plane"})," and the ",(0,s.jsx)(r.strong,{children:"Data Plane"}),"."]}),"\n",(0,s.jsx)(r.h3,{id:"control-plane",children:"Control Plane"}),"\n",(0,s.jsx)(r.p,{children:'The control plane is the "brain" of Linkerd, managing and configuring the data plane proxies.'}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#667eea','primaryTextColor':'#fff','primaryBorderColor':'#4c63e8','lineColor':'#8099ec','background':'transparent','mainBkg':'#667eea','clusterBkg':'transparent','clusterBorder':'#4c63e8','fontSize':'13px'}}}%%\r\ngraph TB\r\n    subgraph CP[\"Control Plane Components\"]\r\n        Identity[\"Identity<br/>Certificate Authority\"]\r\n        Destination[\"Destination<br/>Service Discovery\"]\r\n        ProxyInj[\"Proxy Injector<br/>Auto-injection\"]\r\n    end\r\n    \r\n    subgraph DP[\"Data Plane\"]\r\n        P1[\"Proxy\"]\r\n        P2[\"Proxy\"]\r\n        P3[\"Proxy\"]\r\n    end\r\n    \r\n    Identity --\x3e|Issues Certs| DP\r\n    Destination --\x3e|Service Info| DP\r\n    ProxyInj --\x3e|Injects| DP\r\n    \r\n    classDef cpStyle fill:#667eea,stroke:#4c63e8,stroke-width:3px,color:#fff\r\n    classDef dpStyle fill:#764ba2,stroke:#5d3b82,stroke-width:2px,color:#fff\r\n    \r\n    class Identity,Destination,ProxyInj cpStyle\r\n    class P1,P2,P3 dpStyle"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Key Components:"})}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Component"}),(0,s.jsx)(r.th,{children:"Purpose"}),(0,s.jsx)(r.th,{children:"Function"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Identity"})}),(0,s.jsx)(r.td,{children:"Certificate Authority"}),(0,s.jsx)(r.td,{children:"Issues and manages mTLS certificates for all proxies"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Destination"})}),(0,s.jsx)(r.td,{children:"Service Discovery"}),(0,s.jsx)(r.td,{children:"Provides endpoint information and routing rules"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Proxy Injector"})}),(0,s.jsx)(r.td,{children:"Automatic Injection"}),(0,s.jsx)(r.td,{children:"Automatically adds Linkerd proxy to pods"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"data-plane",children:"Data Plane"}),"\n",(0,s.jsx)(r.p,{children:"The data plane consists of lightweight proxies deployed as sidecars alongside your application containers."}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#667eea','primaryTextColor':'#fff','primaryBorderColor':'#4c63e8','lineColor':'#8099ec','background':'transparent','clusterBkg':'transparent','clusterBorder':'#4c63e8','fontSize':'14px'}}}%%\r\ngraph LR\r\n    subgraph Pod[\"Kubernetes Pod\"]\r\n        App[\"Application<br/>Container\"]\r\n        Proxy[\"Linkerd<br/>Proxy\"]\r\n        Init[\"linkerd-init<br/>Container\"]\r\n    end\r\n    \r\n    Client[\"Client\"] --\x3e|Request| Proxy\r\n    Proxy --\x3e|Intercepts| App\r\n    App --\x3e|Response| Proxy\r\n    Proxy --\x3e|Routes| Client\r\n    \r\n    Init -.->|Sets up<br/>iptables| Proxy\r\n    \r\n    classDef appStyle fill:#8099ec,stroke:#5e7ae9,stroke-width:2px,color:#fff\r\n    classDef proxyStyle fill:#667eea,stroke:#4c63e8,stroke-width:3px,color:#fff\r\n    classDef initStyle fill:#8fa8ed,stroke:#667eea,stroke-width:1px,color:#fff,stroke-dasharray: 5 5\r\n    \r\n    class App appStyle\r\n    class Proxy proxyStyle\r\n    class Init initStyle"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Proxy Responsibilities:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Traffic Interception"}),": Captures all inbound and outbound traffic"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"mTLS Encryption"}),": Automatically encrypts communication between services"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Load Balancing"}),": Distributes requests across healthy endpoints"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Metrics Collection"}),": Gathers detailed telemetry data"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Circuit Breaking"}),": Prevents cascading failures"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"key-features",children:"Key Features"}),"\n",(0,s.jsx)(r.h3,{id:"1-automatic-mutual-tls-mtls",children:"1. Automatic Mutual TLS (mTLS)"}),"\n",(0,s.jsx)(r.p,{children:"Linkerd automatically secures all communication between services with mutual TLS encryption."}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme':'base', 'themeVariables': { 'actorBkg':'#667eea','actorBorder':'#4c63e8','actorTextColor':'#fff','signalColor':'#8099ec','signalTextColor':'inherit','noteBkgColor':'#8fa8ed','noteBorderColor':'#667eea','noteTextColor':'#fff','fontSize':'14px'}}}%%\r\nsequenceDiagram\r\n    participant S1 as Service A<br/>Proxy\r\n    participant CA as Identity CA\r\n    participant S2 as Service B<br/>Proxy\r\n    \r\n    S1->>CA: Request Certificate\r\n    CA->>S1: Issue Certificate\r\n    \r\n    S2->>CA: Request Certificate\r\n    CA->>S2: Issue Certificate\r\n    \r\n    S1->>S2: mTLS Handshake\r\n    Note over S1,S2: Verify Certificates\r\n    \r\n    S1->>S2: Encrypted Request\r\n    S2->>S1: Encrypted Response\r\n    \r\n    Note over S1,S2: All traffic encrypted<br/>No code changes!"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Benefits:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"\u2705 Zero-trust security by default"}),"\n",(0,s.jsx)(r.li,{children:"\u2705 Automatic certificate rotation"}),"\n",(0,s.jsx)(r.li,{children:"\u2705 No application code changes required"}),"\n",(0,s.jsx)(r.li,{children:"\u2705 Defense against man-in-the-middle attacks"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"2-observability",children:"2. Observability"}),"\n",(0,s.jsx)(r.p,{children:"Linkerd provides real-time metrics, distributed tracing, and service topology visualization."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Metrics Available:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Request rate (RPS)"}),"\n",(0,s.jsx)(r.li,{children:"Success rate"}),"\n",(0,s.jsx)(r.li,{children:"Latency percentiles (P50, P95, P99)"}),"\n",(0,s.jsx)(r.li,{children:"TCP-level statistics"}),"\n"]}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Access via Linkerd Viz:"})}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"linkerd viz dashboard\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-traffic-management",children:"3. Traffic Management"}),"\n",(0,s.jsx)(r.p,{children:"Control how traffic flows between services with powerful routing capabilities."}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Capabilities:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Traffic splitting (A/B testing, canary deployments)"}),"\n",(0,s.jsx)(r.li,{children:"Retries and timeouts"}),"\n",(0,s.jsx)(r.li,{children:"Circuit breaking"}),"\n",(0,s.jsx)(r.li,{children:"Load balancing algorithms"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"4-multi-cluster-support",children:"4. Multi-Cluster Support"}),"\n",(0,s.jsx)(r.p,{children:"Linkerd Multicluster enables secure communication across Kubernetes clusters."}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#667eea','primaryTextColor':'#fff','primaryBorderColor':'#4c63e8','lineColor':'#8099ec','background':'transparent','mainBkg':'#667eea','clusterBkg':'transparent','clusterBorder':'#4c63e8','fontSize':'14px'}}}%%\r\ngraph TB\r\n    subgraph C1[\"Cluster 1 - Source\"]\r\n        S1[\"Service A\"]\r\n        GW1[\"Gateway<br/>:4143\"]\r\n    end\r\n    \r\n    subgraph C2[\"Cluster 2 - Target\"]\r\n        S2[\"Service B\"]\r\n        S2M[\"Service B<br/>Mirrored\"]\r\n        GW2[\"Gateway<br/>:4143\"]\r\n    end\r\n    \r\n    S1 --\x3e|Discovers| S2M\r\n    S2M --\x3e|Routes via| GW1\r\n    GW1 <--\x3e|mTLS Tunnel| GW2\r\n    GW2 --\x3e S2\r\n    \r\n    classDef svcStyle fill:#8099ec,stroke:#5e7ae9,stroke-width:2px,color:#fff\r\n    classDef gwStyle fill:#764ba2,stroke:#5d3b82,stroke-width:3px,color:#fff\r\n    classDef mirrorStyle fill:#8fa8ed,stroke:#667eea,stroke-width:2px,color:#fff\r\n    \r\n    class S1,S2 svcStyle\r\n    class GW1,GW2 gwStyle\r\n    class S2M mirrorStyle"}),"\n",(0,s.jsx)(r.h2,{id:"linkerd-components",children:"Linkerd Components"}),"\n",(0,s.jsx)(r.h3,{id:"core-installation",children:"Core Installation"}),"\n",(0,s.jsxs)(l.A,{children:[(0,s.jsxs)(a.A,{value:"crds",label:"CRDs",default:!0,children:[(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Custom Resource Definitions"})," - Kubernetes API extensions for Linkerd"]}),(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"linkerd install --crds | kubectl apply -f -\n"})}),(0,s.jsx)(r.p,{children:"Defines resources like:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"ServiceProfile"})," - Service-level configuration"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"TrafficSplit"})," - Traffic splitting rules"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.code,{children:"Link"})," - Multi-cluster connections"]}),"\n"]})]}),(0,s.jsxs)(a.A,{value:"control-plane",label:"Control Plane",children:[(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Control Plane"})," - Core Linkerd components"]}),(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"linkerd install | kubectl apply -f -\n"})}),(0,s.jsx)(r.p,{children:"Deploys:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Identity service"}),"\n",(0,s.jsx)(r.li,{children:"Destination service"}),"\n",(0,s.jsx)(r.li,{children:"Proxy injector"}),"\n"]})]}),(0,s.jsxs)(a.A,{value:"viz",label:"Linkerd Viz",children:[(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Visualization & Monitoring"})," - Observability dashboard"]}),(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"linkerd viz install | kubectl apply -f -\n"})}),(0,s.jsx)(r.p,{children:"Includes:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Prometheus (metrics storage)"}),"\n",(0,s.jsx)(r.li,{children:"Grafana (dashboards)"}),"\n",(0,s.jsx)(r.li,{children:"Web UI (service topology)"}),"\n",(0,s.jsx)(r.li,{children:"Tap API (real-time traffic inspection)"}),"\n"]})]}),(0,s.jsxs)(a.A,{value:"multicluster",label:"Multicluster",children:[(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Multi-Cluster Extension"})," - Cross-cluster communication"]}),(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"linkerd multicluster install | kubectl apply -f -\n"})}),(0,s.jsx)(r.p,{children:"Provides:"}),(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Gateway (secure tunnel endpoint)"}),"\n",(0,s.jsx)(r.li,{children:"Service mirror (automatic service discovery)"}),"\n",(0,s.jsx)(r.li,{children:"Link controller (manages connections)"}),"\n"]})]})]}),"\n",(0,s.jsx)(r.h2,{id:"linkerd-multicluster",children:"Linkerd Multicluster"}),"\n",(0,s.jsx)(r.h3,{id:"architecture",children:"Architecture"}),"\n",(0,s.jsx)(r.p,{children:"Linkerd Multicluster enables services in one cluster to securely communicate with services in another cluster."}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#667eea','primaryTextColor':'#fff','primaryBorderColor':'#4c63e8','lineColor':'#8099ec','background':'transparent','mainBkg':'#667eea','clusterBkg':'transparent','clusterBorder':'#4c63e8','fontSize':'13px'}}}%%\r\ngraph TB\r\n    subgraph Source[\"Source Cluster\"]\r\n        AppS[\"Application\"]\r\n        LocalS[\"Local<br/>Service\"]\r\n        MirrorS[\"Mirrored<br/>Service\"]\r\n        GWS[\"Gateway<br/>Pod\"]\r\n    end\r\n    \r\n    subgraph Target[\"Target Cluster\"]\r\n        GWT[\"Gateway<br/>Service<br/>(LoadBalancer)\"]\r\n        RemoteS[\"Remote<br/>Service\"]\r\n    end\r\n    \r\n    AppS --\x3e|1. DNS Lookup| MirrorS\r\n    MirrorS --\x3e|2. Route to| GWS\r\n    GWS <--\x3e|3. Secure mTLS| GWT\r\n    GWT --\x3e|4. Forward to| RemoteS\r\n    \r\n    classDef appStyle fill:#8099ec,stroke:#5e7ae9,stroke-width:2px,color:#fff\r\n    classDef localStyle fill:#8fa8ed,stroke:#667eea,stroke-width:2px,color:#fff\r\n    classDef gwStyle fill:#764ba2,stroke:#5d3b82,stroke-width:3px,color:#fff\r\n    classDef remoteStyle fill:#667eea,stroke:#4c63e8,stroke-width:2px,color:#fff\r\n    \r\n    class AppS appStyle\r\n    class LocalS,MirrorS localStyle\r\n    class GWS,GWT gwStyle\r\n    class RemoteS remoteStyle"}),"\n",(0,s.jsx)(r.h3,{id:"how-it-works",children:"How It Works"}),"\n",(0,s.jsxs)(r.ol,{children:["\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Service Export"}),": Mark services for export with a label"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:'labels:\r\n  to-export: "true"\n'})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Service Mirroring"}),": Linkerd automatically creates mirror services in linked clusters"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"hello              # Original service (Cluster B)\r\nhello-cluster-b    # Mirrored service (Cluster A)\n"})}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Gateway Routing"}),": Traffic to mirrored services routes through secure gateways"]}),"\n"]}),"\n",(0,s.jsxs)(r.li,{children:["\n",(0,s.jsxs)(r.p,{children:[(0,s.jsx)(r.strong,{children:"Transparent Access"}),": Applications use standard Kubernetes DNS"]}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"curl http://hello-cluster-b:8080\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"components",children:"Components"}),"\n",(0,s.jsxs)(r.table,{children:[(0,s.jsx)(r.thead,{children:(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.th,{children:"Component"}),(0,s.jsx)(r.th,{children:"Location"}),(0,s.jsx)(r.th,{children:"Purpose"})]})}),(0,s.jsxs)(r.tbody,{children:[(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Link"})}),(0,s.jsx)(r.td,{children:"Source Cluster"}),(0,s.jsx)(r.td,{children:"Defines connection to target cluster"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Service Mirror"})}),(0,s.jsx)(r.td,{children:"Source Cluster"}),(0,s.jsx)(r.td,{children:"Watches target cluster and creates mirrors"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Gateway"})}),(0,s.jsx)(r.td,{children:"Target Cluster"}),(0,s.jsx)(r.td,{children:"Provides entry point for cross-cluster traffic"})]}),(0,s.jsxs)(r.tr,{children:[(0,s.jsx)(r.td,{children:(0,s.jsx)(r.strong,{children:"Probe Service"})}),(0,s.jsx)(r.td,{children:"Source Cluster"}),(0,s.jsx)(r.td,{children:"Health checks gateway connectivity"})]})]})]}),"\n",(0,s.jsx)(r.h3,{id:"traffic-flow-example",children:"Traffic Flow Example"}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme':'base', 'themeVariables': { 'actorBkg':'#667eea','actorBorder':'#4c63e8','actorTextColor':'#fff','signalColor':'#8099ec','signalTextColor':'inherit','noteBkgColor':'#8fa8ed','noteBorderColor':'#667eea','noteTextColor':'#fff','fontSize':'13px'}}}%%\r\nsequenceDiagram\r\n    participant App as App Pod<br/>(Cluster A)\r\n    participant DNS as CoreDNS\r\n    participant Mirror as Mirror Svc<br/>(Cluster A)\r\n    participant GWA as Gateway<br/>(Cluster A)\r\n    participant GWB as Gateway<br/>(Cluster B)\r\n    participant Svc as Service<br/>(Cluster B)\r\n    \r\n    App->>DNS: Resolve hello-cluster-b\r\n    DNS->>App: Return ClusterIP\r\n    \r\n    App->>Mirror: HTTP Request\r\n    Mirror->>GWA: Forward to Gateway\r\n    \r\n    Note over GWA,GWB: mTLS Encrypted Tunnel\r\n    \r\n    GWA->>GWB: Secure Request\r\n    GWB->>Svc: Forward to Service\r\n    Svc->>GWB: Response\r\n    GWB->>GWA: Secure Response\r\n    \r\n    GWA->>Mirror: Forward Response\r\n    Mirror->>App: HTTP Response"}),"\n",(0,s.jsx)(r.h2,{id:"linkerd-viz-dashboard",children:"Linkerd Viz Dashboard"}),"\n",(0,s.jsx)(r.p,{children:"Linkerd Viz provides a web-based dashboard for monitoring your service mesh."}),"\n",(0,s.jsx)(r.h3,{id:"features",children:"Features"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Service Topology"})}),"\n",(0,s.jsx)(r.mermaid,{value:"%%{init: {'theme':'base', 'themeVariables': { 'primaryColor':'#667eea','primaryTextColor':'#fff','primaryBorderColor':'#4c63e8','lineColor':'#8099ec','background':'transparent','fontSize':'14px'}}}%%\r\ngraph LR\r\n    Frontend[\"frontend<br/>100% success<br/>10ms p95\"]\r\n    Cart[\"cart<br/>99.9% success<br/>5ms p95\"]\r\n    Catalog[\"catalog<br/>100% success<br/>15ms p95\"]\r\n    \r\n    Frontend --\x3e|50 RPS| Cart\r\n    Frontend --\x3e|30 RPS| Catalog\r\n    \r\n    classDef goodStyle fill:#8fa8ed,stroke:#667eea,stroke-width:2px,color:#fff\r\n    classDef warnStyle fill:#ffd700,stroke:#ffa500,stroke-width:2px,color:#000\r\n    \r\n    class Frontend,Cart,Catalog goodStyle"}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Metrics Available:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Success Rate"}),": Percentage of successful requests"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"RPS"}),": Requests per second"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Latencies"}),": P50, P95, P99 percentiles"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"TCP Stats"}),": Bytes sent/received, connection count"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"accessing-the-dashboard",children:"Accessing the Dashboard"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Start dashboard\r\nlinkerd viz dashboard\r\n\r\n# Access in browser\r\nopen http://localhost:50750\n"})}),"\n",(0,s.jsx)(r.h3,{id:"live-traffic-tap",children:"Live Traffic Tap"}),"\n",(0,s.jsx)(r.p,{children:"Inspect live traffic in real-time:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Watch requests to a deployment\r\nlinkerd viz tap deploy/frontend\r\n\r\n# Filter by HTTP method\r\nlinkerd viz tap deploy/frontend --method POST\r\n\r\n# Watch traffic between services\r\nlinkerd viz tap deploy/frontend --to deploy/cart\n"})}),"\n",(0,s.jsx)(r.h2,{id:"benefits-for-multi-cluster-environments",children:"Benefits for Multi-Cluster Environments"}),"\n",(0,s.jsx)(r.h3,{id:"security",children:"Security"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Zero-Trust"}),": Every connection authenticated and encrypted"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Certificate Rotation"}),": Automatic rotation every 24 hours"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Identity"}),": Strong identity for every workload"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"reliability",children:"Reliability"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Automatic Retries"}),": Retry failed requests automatically"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Timeouts"}),": Prevent hanging requests"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Circuit Breaking"}),": Fail fast when services are unhealthy"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"observability",children:"Observability"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Golden Metrics"}),": Success rate, latency, throughput"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Service Graph"}),": Visual representation of service dependencies"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Distributed Tracing"}),": Track requests across services and clusters"]}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"performance",children:"Performance"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Ultra-Light Proxy"}),": Written in Rust, minimal resource usage"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"Low Latency"}),": Sub-millisecond proxy overhead"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:"No Configuration"}),": Works out of the box"]}),"\n"]}),"\n",(0,s.jsx)(r.h2,{id:"common-use-cases",children:"Common Use Cases"}),"\n",(0,s.jsx)(r.h3,{id:"1-canary-deployments",children:"1. Canary Deployments"}),"\n",(0,s.jsx)(r.p,{children:"Gradually roll out new versions:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:"apiVersion: split.smi-spec.io/v1alpha1\r\nkind: TrafficSplit\r\nmetadata:\r\n  name: frontend-split\r\nspec:\r\n  service: frontend\r\n  backends:\r\n  - service: frontend-v1\r\n    weight: 90\r\n  - service: frontend-v2\r\n    weight: 10\n"})}),"\n",(0,s.jsx)(r.h3,{id:"2-cross-cluster-failover",children:"2. Cross-Cluster Failover"}),"\n",(0,s.jsx)(r.p,{children:"Route traffic to backup cluster when primary fails:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:"apiVersion: split.smi-spec.io/v1alpha1\r\nkind: TrafficSplit\r\nmetadata:\r\n  name: api-failover\r\nspec:\r\n  service: api\r\n  backends:\r\n  - service: api-local\r\n    weight: 100\r\n  - service: api-backup-cluster\r\n    weight: 0\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-multi-tenant-isolation",children:"3. Multi-Tenant Isolation"}),"\n",(0,s.jsx)(r.p,{children:"Separate production and staging clusters:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{children:"Production Cluster \u2190 \u2192 Staging Cluster\r\n      \u2193                      \u2193\r\n   Services A-Z         Services A-Z (test)\n"})}),"\n",(0,s.jsx)(r.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(r.h3,{id:"1-certificate-management",children:"1. Certificate Management"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:"Use a secure trust anchor"}),"\n",(0,s.jsx)(r.li,{children:"Rotate certificates regularly"}),"\n",(0,s.jsx)(r.li,{children:"Store CA keys securely"}),"\n"]}),"\n",(0,s.jsx)(r.h3,{id:"2-resource-limits",children:"2. Resource Limits"}),"\n",(0,s.jsx)(r.p,{children:"Set appropriate resource limits for proxies:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:"resources:\r\n  requests:\r\n    cpu: 100m\r\n    memory: 20Mi\r\n  limits:\r\n    cpu: 1000m\r\n    memory: 250Mi\n"})}),"\n",(0,s.jsx)(r.h3,{id:"3-namespace-injection",children:"3. Namespace Injection"}),"\n",(0,s.jsx)(r.p,{children:"Enable automatic injection per namespace:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"kubectl annotate namespace my-app linkerd.io/inject=enabled\n"})}),"\n",(0,s.jsx)(r.h3,{id:"4-service-profiles",children:"4. Service Profiles"}),"\n",(0,s.jsx)(r.p,{children:"Define service-level configuration:"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-yaml",children:"apiVersion: linkerd.io/v1alpha2\r\nkind: ServiceProfile\r\nmetadata:\r\n  name: frontend.default.svc.cluster.local\r\nspec:\r\n  routes:\r\n  - name: GET /api/products\r\n    condition:\r\n      method: GET\r\n      pathRegex: /api/products\r\n    timeout: 1s\r\n    retries:\r\n      limit: 3\n"})}),"\n",(0,s.jsx)(r.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(r.h3,{id:"check-linkerd-status",children:"Check Linkerd Status"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Check control plane\r\nlinkerd check\r\n\r\n# Check data plane\r\nlinkerd check --proxy\r\n\r\n# Check multicluster\r\nlinkerd multicluster check\n"})}),"\n",(0,s.jsx)(r.h3,{id:"view-proxy-logs",children:"View Proxy Logs"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# View proxy logs for a pod\r\nkubectl logs <pod-name> -c linkerd-proxy\r\n\r\n# Follow logs\r\nkubectl logs <pod-name> -c linkerd-proxy -f\n"})}),"\n",(0,s.jsx)(r.h3,{id:"debug-service-mesh",children:"Debug Service Mesh"}),"\n",(0,s.jsx)(r.pre,{children:(0,s.jsx)(r.code,{className:"language-bash",children:"# Get proxy statistics\r\nlinkerd viz stat deploy\r\n\r\n# View service endpoints\r\nlinkerd viz endpoints <service>\r\n\r\n# Check proxy configuration\r\nlinkerd diagnostics proxy-metrics <pod>\n"})}),"\n",(0,s.jsx)(r.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(r.p,{children:"Now that you understand Linkerd's architecture and capabilities:"}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.a,{href:"/docs/local-setup/traffic-splits",children:"Traffic Management"})})," - Learn about TrafficSplits and routing"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.a,{href:"/docs/local-setup/creating-clusters",children:"Creating Clusters"})})," - Set up your multi-cluster environment"]}),"\n",(0,s.jsxs)(r.li,{children:[(0,s.jsx)(r.strong,{children:(0,s.jsx)(r.a,{href:"/docs/local-setup/installing-linkerd",children:"Installing Linkerd"})})," - Deploy Linkerd in your clusters"]}),"\n"]}),"\n",(0,s.jsx)(r.hr,{}),"\n",(0,s.jsx)(r.p,{children:(0,s.jsx)(r.strong,{children:"Resources:"})}),"\n",(0,s.jsxs)(r.ul,{children:["\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://linkerd.io/2.14/overview/",children:"Official Linkerd Documentation"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://linkerd.io/2.14/reference/architecture/",children:"Linkerd Architecture"})}),"\n",(0,s.jsx)(r.li,{children:(0,s.jsx)(r.a,{href:"https://linkerd.io/2.14/features/multicluster/",children:"Multicluster Communication"})}),"\n"]})]})}function p(e={}){const{wrapper:r}={...(0,t.R)(),...e.components};return r?(0,s.jsx)(r,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},9365:(e,r,n)=>{n.d(r,{A:()=>l});n(6540);var i=n(4164);const s={tabItem:"tabItem_Ymn6"};var t=n(4848);function l({children:e,hidden:r,className:n}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,i.A)(s.tabItem,n),hidden:r,children:e})}}}]);